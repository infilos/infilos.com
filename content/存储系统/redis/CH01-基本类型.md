---
type: docs
title: "CH01-基本类型"
linkTitle: "CH01-基本类型"
weight: 1
---

<!-- toc -->

## 概览

Redis 中所有的 Key 都是字符串。我们在谈基础数据结构时，讨论的是存储值的数据类型，主要包括常见的5种数据类型，分别是：String、List、Set、Zset、Hash。

<div align="center"> <img src="https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20210504125755.png" style="display:block;width:50%;" alt="NAME" align=center /> </div>

| 结构类型   | 值的形式                 | 读写能力                                                     |
| ---------- | ------------------------ | ------------------------------------------------------------ |
| **String** | 字符串、整数、浮点数     | 对整个字符串或字符串的一部分进行操作；对整数或浮点数进行自增或自减操作； |
| **List**   | 由字符串构造的链表       | 对链表的两端进行push和pop操作，读取单个或多个元素；根据值查找或删除元素； |
| **Set**    | 由无重复字符串构成的集合 | 字符串的集合，包含基础的方法有看是否存在添加、获取、删除；还包含计算交集、并集、差集等 |
| **Hash**   | 由键值对构成的无序散列表 | 包含方法有添加、获取、删除单个元素                           |
| **Zset**   | 由键值对构成的有序集合   | 字符串成员与浮点数分数之间的有序映射；元素的排列顺序由分数的大小决定；包含方法有添加、获取、删除单个元素以及根据分值范围或成员来获取元素 |

## String

String是redis中最基本的数据类型，一个key对应一个value。

<div align="center"> <img src="https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20210504130432.png" style="display:block;width:50%;" alt="NAME" align=center /> </div>

### 常用命令

| 命令   | 简述                   | 使用              |
| ------ | ---------------------- | ----------------- |
| GET    | 获取存储在给定键中的值 | GET name          |
| SET    | 设置存储在给定键中的值 | SET name value    |
| DEL    | 删除存储在给定键中的值 | DEL name          |
| INCR   | 将键存储的值加1        | INCR key          |
| DECR   | 将键存储的值减1        | DECR key          |
| INCRBY | 将键存储的值加上整数   | INCRBY key amount |
| DECRBY | 将键存储的值减去整数   | DECRBY key amount |

### 应用场景

- **缓存**： 经典使用场景，把常用信息，字符串，图片或者视频等信息放到redis中，redis作为缓存层，mysql做持久化层，降低mysql的读写压力。

- **计数器**：redis是单线程模型，一个命令执行完才会执行下一个，同时数据可以一步落地到其他的数据源。

- **session**：常见方案spring session + redis实现session共享

## List

Redis中的List其实就是链表（Redis用双端链表实现List）。

<div align="center"> <img src="https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20210504130444.png" style="display:block;width:50%;" alt="NAME" align=center /> </div>

### 常用命令

| 命令   | 简述                                                         | 使用            |
| ------ | ------------------------------------------------------------ | --------------- |
| RPUSH  | 将给定值推入到列表右端                                       | RPUSH key value |
| LPUSH  | 将给定值推入到列表左端                                       | LPUSH key value |
| RPOP   | 从列表的右端弹出一个值，并返回被弹出的值                     | RPOP key        |
| LPOP   | 从列表的左端弹出一个值，并返回被弹出的值                     | LPOP key        |
| LRANGE | 获取列表在给定范围上的所有值                                 | LRANGE key 0 -1 |
| LINDEX | 通过索引获取列表中的元素。你也可以使用负数下标，以 -1 表示列表的最后一个元素， -2 表示列表的倒数第二个元素，以此类推。 | LINEX key index |

### 应用场景

- **微博TimeLine**: 有人发布微博，用lpush加入时间轴，展示新的列表信息。
- **消息队列**

## Set

Redis 的 Set 是 String 类型的无序集合。集合成员是唯一的，这就意味着集合中不能出现重复的数据。

Redis 中集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)。

<div align="center"> <img src="https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20210504130624.png" style="display:block;width:50%;" alt="NAME" align=center /> </div>

### 常用命令

| 命令      | 简述                                  | 使用                 |
| --------- | ------------------------------------- | -------------------- |
| SADD      | 向集合添加一个或多个成员              | SADD key value       |
| SCARD     | 获取集合的成员数                      | SCARD key            |
| SMEMBER   | 返回集合中的所有成员                  | SMEMBER key member   |
| SISMEMBER | 判断 member 元素是否是集合 key 的成员 | SISMEMBER key member |

### 应用场景

**实战场景**

- **标签**（tag）,给用户添加标签，或者用户给消息添加标签，这样有同一标签或者类似标签的可以给推荐关注的事或者关注的人。
- **点赞，或点踩，收藏等**，可以放到set中实现

## Hash

Redis hash 是一个 string 类型的 field（字段） 和 value（值） 的映射表，hash 特别适合用于存储对象。

<div align="center"> <img src="https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20210504130731.png" style="display:block;width:50%;" alt="NAME" align=center /> </div>

### 常用命令

| 命令    | 简述                                     | 使用                          |
| ------- | ---------------------------------------- | ----------------------------- |
| HSET    | 添加键值对                               | HSET hash-key sub-key1 value1 |
| HGET    | 获取指定散列键的值                       | HGET hash-key key1            |
| HGETALL | 获取散列中包含的所有键值对               | HGETALL hash-key              |
| HDEL    | 如果给定键存在于散列中，那么就移除这个键 | HDEL hash-key sub-key1        |

### 应用场景

- **缓存**： 能直观，相比string更节省空间，的维护缓存信息，如用户信息，视频信息等。

## ZSet

Redis 有序集合和集合一样也是 string 类型元素的集合,且不允许重复的成员。不同的是每个元素都会关联一个 double 类型的分数。redis 正是通过分数来为集合中的成员进行从小到大的排序。

有序集合的成员是唯一的,但分数(score)却可以重复。集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)。

<div align="center"> <img src="https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20210504130854.png" style="display:block;width:50%;" alt="NAME" align=center /> </div>

### 常用命令

| 命令   | 简述                                                     | 使用                           |
| ------ | -------------------------------------------------------- | ------------------------------ |
| ZADD   | 将一个带有给定分值的成员添加到哦有序集合里面             | ZADD zset-key 178 member1      |
| ZRANGE | 根据元素在有序集合中所处的位置，从有序集合中获取多个元素 | ZRANGE zset-key 0-1 withccores |
| ZREM   | 如果给定元素成员存在于有序集合中，那么就移除这个元素     | ZREM zset-key member1          |

### 应用场景

- **排行榜**：有序集合经典使用场景。例如小说视频等网站需要对用户上传的小说视频做排行榜，榜单可以按照用户关注数，更新时间，字数等打分，做排行。

