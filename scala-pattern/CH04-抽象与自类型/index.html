
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Infilos's persional workspace.">
      
      
      
        <meta name="author" content="infilos">
      
      
        <link rel="canonical" href="https://www.infilos.com/scala-pattern/CH04-%E6%8A%BD%E8%B1%A1%E4%B8%8E%E8%87%AA%E7%B1%BB%E5%9E%8B/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.3">
    
    
      
        <title>CH04-抽象与自类型 - Infilos Workspace</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e35208c4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ef6f36e2.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Ubuntu";--md-code-font-family:"Ubuntu Mono"}</style>
      
    
    
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-123062585-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  
  
    
  
  
  <meta property="og:type" content="website">
  <meta property="og:title" content="Infilos Workspace - CH04-抽象与自类型">
  <meta property="og:description" content="Infilos's persional workspace.">
  <meta property="og:url" content="https://www.infilos.com/scala-pattern/CH04-%E6%8A%BD%E8%B1%A1%E4%B8%8E%E8%87%AA%E7%B1%BB%E5%9E%8B/">
  <meta property="og:image" content="https://www.infilos.comassets/images/banner.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="1080">
  <meta property="og:image:height" content="568">
  <link rel="stylesheet" href="../../assets/stylesheets/main.4ea92eb1.min.css">

  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="deep-orange">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ch04-" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-announce">
          <div class="md-announce__inner md-grid md-typeset">
            

          </div>
        </aside>
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Infilos Workspace" class="md-header__button md-logo" aria-label="Infilos Workspace" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Infilos Workspace
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CH04-抽象与自类型
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/infilos/infilos.com" title="前往 GitHub 仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    infilos/infilos.com
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../os/" class="md-tabs__link">
        Basic
      </a>
    </li>
  

  

      
        
  
  
    
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../java-base/CH01-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" class="md-tabs__link md-tabs__link--active">
        Language
      </a>
    </li>
  

  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../spring/CH01-IOC/" class="md-tabs__link">
        Project
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../rdbms/CH01-%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F/" class="md-tabs__link">
        Architect
      </a>
    </li>
  

  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../ds/CH01-%E6%95%B0%E7%BB%84-%E9%93%BE%E8%A1%A8/" class="md-tabs__link">
        Interview
      </a>
    </li>
  

  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../open-source/" class="md-tabs__link">
      Open Source
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../wip/" class="md-tabs__link">
      Blog
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../wip/" class="md-tabs__link">
      About
    </a>
  </li>

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Infilos Workspace" class="md-nav__button md-logo" aria-label="Infilos Workspace" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Infilos Workspace
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/infilos/infilos.com" title="前往 GitHub 仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    infilos/infilos.com
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Basic
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Basic" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Basic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      <label class="md-nav__link" for="__nav_2_1">
        操作系统
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="操作系统" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          操作系统
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/" class="md-nav__link">
        CH00-概览
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/CH02-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D/" class="md-nav__link">
        CH02-操作系统介绍
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/CH04-%E6%8A%BD%E8%B1%A1-%E8%BF%9B%E7%A8%8B/" class="md-nav__link">
        CH04-抽象-进程
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/CH05-%E6%8F%92%E5%8F%99-%E8%BF%9B%E7%A8%8B%20API/" class="md-nav__link">
        CH05-插叙-进程 API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/CH06-%E6%9C%BA%E5%88%B6-%E5%8F%97%E9%99%90%E7%9B%B4%E6%8E%A5%E6%89%A7%E8%A1%8C/" class="md-nav__link">
        CH06-机制-受限直接执行
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/CH07-%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6/" class="md-nav__link">
        CH07-进程调度
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/CH08-%E8%B0%83%E5%BA%A6-%E5%A4%9A%E7%BA%A7%E5%8F%8D%E9%A6%88%E9%98%9F%E5%88%97/" class="md-nav__link">
        CH08-调度-多级反馈队列
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/CH09-%E8%B0%83%E5%BA%A6-%E6%AF%94%E4%BE%8B%E4%BB%BD%E9%A2%9D/" class="md-nav__link">
        CH09-调度-比例份额
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/CH10-%E5%A4%9A%E5%A4%84%E7%90%86%E5%99%A8%E8%B0%83%E5%BA%A6/" class="md-nav__link">
        CH10-多处理器调度
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/CH13-%E6%8A%BD%E8%B1%A1-%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" class="md-nav__link">
        CH13-抽象-地址空间
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/CH14-%E5%86%85%E5%AD%98%E6%8E%A5%E5%8F%A3/" class="md-nav__link">
        CH14-内存接口
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/CH15-%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2/" class="md-nav__link">
        CH15-地址转换
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os/CH16-%E5%88%86%E6%AE%B5/" class="md-nav__link">
        CH16-分段
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        None
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      <label class="md-nav__link" for="__nav_2_2">
        操作系统-性能之殇
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="操作系统-性能之殇" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          操作系统-性能之殇
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os-perf/" class="md-nav__link">
        CH00-概览
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os-perf/CH01-%E5%86%AF%E8%AF%BA%E4%BE%9D%E6%9B%BC%E7%93%B6%E9%A2%88/" class="md-nav__link">
        CH01-冯诺依曼瓶颈
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os-perf/CH02-CPU%E5%AE%9E%E7%8E%B0/" class="md-nav__link">
        CH02-CPU实现
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os-perf/CH03-%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8/" class="md-nav__link">
        CH03-事件驱动
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os-perf/CH04-Unix%E8%BF%9B%E7%A8%8B%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        CH04-Unix进程模型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os-perf/CH05-DPDK-SDN-%E5%A4%A7%E9%A1%B5%E5%86%85%E5%AD%98/" class="md-nav__link">
        CH05-DPDK-SDN-大页内存
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os-perf/CH06-%E5%B1%80%E9%83%A8%E6%80%A7%E4%B8%8E%E4%B9%90%E8%A7%82/" class="md-nav__link">
        CH06-局部性与乐观
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../os-perf/CH07-%E5%85%B1%E5%90%8C%E7%9A%84%E7%93%B6%E9%A2%88/" class="md-nav__link">
        CH07-共同的瓶颈
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      <label class="md-nav__link" for="__nav_2_3">
        I/O 模型
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="I/O 模型" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          I/O 模型
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../io-model/CH01-IO%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        CH01-Linux IO/线程 模型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../io-model/CH02-IO%E9%9B%B6%E6%8B%B7%E8%B4%9D/" class="md-nav__link">
        CH02-Linux IO 零拷贝
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../io-model/CH03-Netty%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        CH03-Netty IO 模型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../io-model/CH04-Redis%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        CH04-Redis IO 模型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../io-model/CH05-Nginx%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        CH05-Nginx IO 模型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../io-model/CH06-MySQL%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        CH06-MySQL模型
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" >
      
      <label class="md-nav__link" for="__nav_2_4">
        Network
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Network" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Network
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../network/CH01-%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82/" class="md-nav__link">
        CH01-网络分层
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../network/CH02-IP%E5%8D%8F%E8%AE%AE/" class="md-nav__link">
        CH02-IP协议
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../network/CH03-TCP%E5%8D%8F%E8%AE%AE/" class="md-nav__link">
        CH03-TCP协议
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../network/CH04-UDP%E5%8D%8F%E8%AE%AE/" class="md-nav__link">
        CH04-UDP协议
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../network/CH05-HTTP%E5%8D%8F%E8%AE%AE/" class="md-nav__link">
        CH05-HTTP协议
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../network/CH06-WebSocket/" class="md-nav__link">
        CH06-WebSocket
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../network/CH07-DNS%E6%9C%8D%E5%8A%A1/" class="md-nav__link">
        CH07-DNS服务
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../network/CH08-%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BF%87%E7%A8%8B/" class="md-nav__link">
        CH08-浏览器过程
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      <label class="md-nav__link" for="__nav_2_5">
        TCP/IP
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="TCP/IP" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          TCP/IP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tcpip/CH01-%E6%8F%A1%E6%89%8B%E6%9C%BA%E5%88%B6/" class="md-nav__link">
        CH01-握手机制
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tcpip/CH02-%E5%8D%8F%E8%AE%AE%E6%A0%88%E7%B2%BE%E8%A6%81/" class="md-nav__link">
        CH02-协议栈精要
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tcpip/CH03-%E8%B0%83%E4%BC%98%E5%8F%82%E6%95%B0/" class="md-nav__link">
        CH03-调优参数
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tcpip/CH04-%E7%90%86%E8%A7%A3%E7%BD%91%E7%BB%9C%E6%A0%88/" class="md-nav__link">
        CH04-理解网络栈
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tcpip/CH05-RFC-1180/" class="md-nav__link">
        CH05-RFC-1180
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tcpip/CH06-%E5%8F%AF%E9%9D%A0%E6%80%A7%E7%96%91%E9%97%AE/" class="md-nav__link">
        CH06-可靠性疑问
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" type="checkbox" id="__nav_2_6" >
      
      <label class="md-nav__link" for="__nav_2_6">
        HTTP
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="HTTP" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          HTTP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../http/CH01-%E6%A6%82%E8%BF%B0/" class="md-nav__link">
        CH01-HTTP 概述
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../http/CH02-URL%E4%B8%8E%E8%B5%84%E6%BA%90/" class="md-nav__link">
        CH02-URL与资源
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../http/CH03-HTTP%E6%8A%A5%E6%96%87/" class="md-nav__link">
        CH03-HTTP报文
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../http/CH04-%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86/" class="md-nav__link">
        CH04-连接管理
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../http/CH99-%E6%80%A7%E8%83%BD%E6%8E%A2%E7%B4%A2/" class="md-nav__link">
        CH99-性能探索
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        Language
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Language" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Language
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      <label class="md-nav__link" for="__nav_3_1">
        Java
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Java" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Java
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_1" type="checkbox" id="__nav_3_1_1" >
      
      <label class="md-nav__link" for="__nav_3_1_1">
        Java 基础
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Java 基础" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_1">
          <span class="md-nav__icon md-icon"></span>
          Java 基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-base/CH01-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" class="md-nav__link">
        CH01-面向对象
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-base/CH02-%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/" class="md-nav__link">
        CH02-基本知识
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-base/CH03-%E5%9F%BA%E6%9C%AC%E5%9B%BE%E8%B0%B1/" class="md-nav__link">
        CH03-基本图谱
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-base/CH04-%E6%B3%9B%E5%9E%8B%E6%9C%BA%E5%88%B6/" class="md-nav__link">
        CH04-泛型机制
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-base/CH05-%E6%B3%A8%E8%A7%A3%E6%9C%BA%E5%88%B6/" class="md-nav__link">
        CH05-注解机制
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-base/CH06-%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6/" class="md-nav__link">
        CH06-异常机制
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-base/CH07-%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6/" class="md-nav__link">
        CH07-反射机制
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-base/CH08-SPI%E6%9C%BA%E5%88%B6/" class="md-nav__link">
        CH08-SPI机制
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_2" type="checkbox" id="__nav_3_1_2" >
      
      <label class="md-nav__link" for="__nav_3_1_2">
        Java 集合
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Java 集合" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_2">
          <span class="md-nav__icon md-icon"></span>
          Java 集合
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-collection/CH01-%E9%9B%86%E5%90%88%E7%BB%93%E6%9E%84/" class="md-nav__link">
        CH01-集合结构
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-collection/CH02-ArrayList/" class="md-nav__link">
        CH02-ArrayList
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-collection/CH03-LinkedList/" class="md-nav__link">
        CH03-LinkedList
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-collection/CH04-Stack-Queue/" class="md-nav__link">
        CH04-Stack-Queue
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-collection/CH05-PriorityQueue/" class="md-nav__link">
        CH05-PriorityQueue
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-collection/CH06-HashSet-Map/" class="md-nav__link">
        CH06-HashSet-Map
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-collection/CH07-LinkedHashSet-Map/" class="md-nav__link">
        CH07-LinkedHashSet-Map
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-collection/CH08-TreeSet-Map/" class="md-nav__link">
        CH08-TreeSet-Map
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-collection/CH09-WeakHashMap/" class="md-nav__link">
        CH09-WeakHashMap
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_3" type="checkbox" id="__nav_3_1_3" >
      
      <label class="md-nav__link" for="__nav_3_1_3">
        Java 并发
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Java 并发" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_3">
          <span class="md-nav__icon md-icon"></span>
          Java 并发
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_3_1" type="checkbox" id="__nav_3_1_3_1" >
      
      <label class="md-nav__link" for="__nav_3_1_3_1">
        基础
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="基础" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_3_1">
          <span class="md-nav__icon md-icon"></span>
          基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH01-%E5%B9%B6%E5%8F%91%E4%BD%93%E7%B3%BB/" class="md-nav__link">
        CH01-并发体系
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH02-%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        CH02-理论基础
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH03-%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80-1/" class="md-nav__link">
        CH03-线程基础-1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH04-%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80-2/" class="md-nav__link">
        CH04-线程基础-2
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_3_2" type="checkbox" id="__nav_3_1_3_2" >
      
      <label class="md-nav__link" for="__nav_3_1_3_2">
        关键字
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="关键字" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_3_2">
          <span class="md-nav__icon md-icon"></span>
          关键字
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH05-Synchronized/" class="md-nav__link">
        CH05-Synchronized
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH06-Volatile/" class="md-nav__link">
        CH06-Volatile
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH07-Final/" class="md-nav__link">
        CH07-Final
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_3_3" type="checkbox" id="__nav_3_1_3_3" >
      
      <label class="md-nav__link" for="__nav_3_1_3_3">
        锁
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="锁" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_3_3">
          <span class="md-nav__icon md-icon"></span>
          锁
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH08-%E5%B9%B6%E5%8F%91%E6%A6%82%E8%A7%88/" class="md-nav__link">
        CH08-并发概览
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH09-%E5%BA%95%E5%B1%82%E6%94%AF%E6%92%91/" class="md-nav__link">
        CH09-底层支撑
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH10-LockSupport/" class="md-nav__link">
        CH10-LockSupport
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH11-AQS-1/" class="md-nav__link">
        CH11-AQS-1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH12-AQS-2/" class="md-nav__link">
        CH12-AQS-2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH13-AQS-3/" class="md-nav__link">
        CH13-AQS-3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH14-AQS-4/" class="md-nav__link">
        CH14-AQS-4
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH15-ReentrantLock/" class="md-nav__link">
        CH15-ReentrantLock
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH16-ReentrantReadWriteLock/" class="md-nav__link">
        CH16-ReentrantReadWriteLock
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_3_4" type="checkbox" id="__nav_3_1_3_4" >
      
      <label class="md-nav__link" for="__nav_3_1_3_4">
        集合
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="集合" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_3_4">
          <span class="md-nav__icon md-icon"></span>
          集合
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH17-ConcurrentHashMap/" class="md-nav__link">
        CH17-ConcurrentHashMap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH18-ConcurrentLinkedQueue/" class="md-nav__link">
        CH18-ConcurrentLinkedQueue
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH19-BlockingQueue/" class="md-nav__link">
        CH19-BlockingQueue
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_3_5" type="checkbox" id="__nav_3_1_3_5" >
      
      <label class="md-nav__link" for="__nav_3_1_3_5">
        线程池
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="线程池" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_3_5">
          <span class="md-nav__icon md-icon"></span>
          线程池
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH20-FutureTask/" class="md-nav__link">
        CH20-FutureTask
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH21-ThreadPoolExecutor/" class="md-nav__link">
        CH21-ThreadPoolExecutor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH22-ScheduledThreadPoolExecutor/" class="md-nav__link">
        CH22-ScheduledThreadPoolExecutor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH23-ForkJoin/" class="md-nav__link">
        CH23-ForkJoin.md
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_3_6" type="checkbox" id="__nav_3_1_3_6" >
      
      <label class="md-nav__link" for="__nav_3_1_3_6">
        工具
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="工具" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_3_6">
          <span class="md-nav__icon md-icon"></span>
          工具
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH24-CountDownLatch/" class="md-nav__link">
        CH24-CountDownLatch
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH25-CyclicBarrier/" class="md-nav__link">
        CH25-CyclicBarrier
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH26-Semaphore/" class="md-nav__link">
        CH26-Semaphore
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH27-Phaser/" class="md-nav__link">
        CH27-Phaser
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH28-Exchanger/" class="md-nav__link">
        CH28-Exchanger
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH29-ThreadLocal/" class="md-nav__link">
        CH29-ThreadLocal
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_3_7" type="checkbox" id="__nav_3_1_3_7" >
      
      <label class="md-nav__link" for="__nav_3_1_3_7">
        汇总
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="汇总" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_3_7">
          <span class="md-nav__icon md-icon"></span>
          汇总
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH30-AllLocks/" class="md-nav__link">
        CH30-AllLocks
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH31-AllQueues/" class="md-nav__link">
        CH31-AllQueues
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-concurrent/CH32-AllPools/" class="md-nav__link">
        CH32-AllPools
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_4" type="checkbox" id="__nav_3_1_4" >
      
      <label class="md-nav__link" for="__nav_3_1_4">
        Java I/O
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Java I/O" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_4">
          <span class="md-nav__icon md-icon"></span>
          Java I/O
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH01-IO%E5%88%86%E7%B1%BB/" class="md-nav__link">
        CH01-IO分类
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH02-%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH02-装饰模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH03-InputStream/" class="md-nav__link">
        CH03-InputStream
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH04-OutputStream/" class="md-nav__link">
        CH04-OutputStream
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH05-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/" class="md-nav__link">
        CH05-常用操作.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH06-IO%E5%AE%9E%E7%8E%B0/" class="md-nav__link">
        CH06-IO实现
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH07-IO%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        CH07-IO模型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH08-BIO%E5%8E%9F%E7%90%86/" class="md-nav__link">
        CH08-BIO原理
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH09-NIO%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        CH09-NIO基础
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH10-NIO%E5%8E%9F%E7%90%86/" class="md-nav__link">
        CH10-NIO原理
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH11-AIO%E5%8E%9F%E7%90%86/" class="md-nav__link">
        CH11-AIO原理
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH12-%E9%9B%B6%E6%8B%B7%E8%B4%9D/" class="md-nav__link">
        CH12-零拷贝
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-io/CH13-%E5%86%85%E5%AD%98%E6%98%A0%E5%B0%84/" class="md-nav__link">
        CH13-内存映射
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_5" type="checkbox" id="__nav_3_1_5" >
      
      <label class="md-nav__link" for="__nav_3_1_5">
        Java JVM
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Java JVM" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_5">
          <span class="md-nav__icon md-icon"></span>
          Java JVM
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH01-JVM%E6%A6%82%E8%A7%88/" class="md-nav__link">
        CH01-JVM概览
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH02-JVM%E5%AD%97%E8%8A%82%E7%A0%81/" class="md-nav__link">
        CH02-JVM字节码
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH03-JVM%E7%B1%BB%E5%8A%A0%E8%BD%BD/" class="md-nav__link">
        CH03-JVM类加载
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH04-JVM%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/" class="md-nav__link">
        CH04-JVM内存结构
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH05-JVM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B-1/" class="md-nav__link">
        CH05-JVM内存模型-1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH06-JVM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B-2/" class="md-nav__link">
        CH06-JVM内存模型-2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH07-JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/" class="md-nav__link">
        CH07-JVM垃圾回收
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH08-JVM-G1/" class="md-nav__link">
        CH08-JVM-G1.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH09-JVM-ZGC/" class="md-nav__link">
        CH09-JVM-ZGC
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH10-JVM%E8%B0%83%E4%BC%98%E5%8F%82%E6%95%B0/" class="md-nav__link">
        CH10-JVM调优参数
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH11-JVM-OOM/" class="md-nav__link">
        CH11-JVM-OOM
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH12-JVM%E7%BA%BF%E7%A8%8BDump/" class="md-nav__link">
        CH12-JVM线程Dump
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH13-JVM%E8%B0%83%E8%AF%95%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        CH13-JVM调试命令
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH14-JVM%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        CH14-JVM调试工具
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm/CH15-JVM%E5%8A%A8%E6%80%81%E8%B0%83%E8%AF%95/" class="md-nav__link">
        CH15-JVM动态调试
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      <label class="md-nav__link" for="__nav_3_2">
        JVM
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="JVM" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          JVM
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_1" type="checkbox" id="__nav_3_2_1" >
      
      <label class="md-nav__link" for="__nav_3_2_1">
        Java JSR-133
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Java JSR-133" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_1">
          <span class="md-nav__icon md-icon"></span>
          Java JSR-133
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../jmm-133/CH01-%E6%8C%87%E4%BB%A4%E9%87%8D%E6%8E%92/" class="md-nav__link">
        CH01-指令重排
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../jmm-133/CH02-%E5%86%85%E5%AD%98%E5%B1%8F%E9%9A%9C/" class="md-nav__link">
        CH02-内存屏障
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../jmm-133/CH03-%E5%A4%9A%E5%A4%84%E7%90%86%E5%99%A8/" class="md-nav__link">
        CH03-多处理器
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../jmm-133/CH04-%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/" class="md-nav__link">
        CH04-开发指南
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_2" type="checkbox" id="__nav_3_2_2" >
      
      <label class="md-nav__link" for="__nav_3_2_2">
        Java JMM 规范
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Java JMM 规范" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_2">
          <span class="md-nav__icon md-icon"></span>
          Java JMM 规范
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../jmm-spec/CH01-JMM%E8%A7%84%E8%8C%83/" class="md-nav__link">
        CH01-JMM规范
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../jmm-spec/CH02-JMM%E8%A7%A3%E9%87%8A/" class="md-nav__link">
        CH02-JMM Explain
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../jmm-spec/CH03-JMM%E5%8E%9F%E5%88%99/" class="md-nav__link">
        CH03-JMM原则
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../jmm-spec/CH04-JSR133-FAQ/" class="md-nav__link">
        CH04-JSR133-FAQ
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../jmm-spec/CH05-JSR133-Cook/" class="md-nav__link">
        CH05-JSR133-Cook
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_3" type="checkbox" id="__nav_3_2_3" >
      
      <label class="md-nav__link" for="__nav_3_2_3">
        Java JVM 深入理解 V2
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Java JVM 深入理解 V2" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_3">
          <span class="md-nav__icon md-icon"></span>
          Java JVM 深入理解 V2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_3_1" type="checkbox" id="__nav_3_2_3_1" >
      
      <label class="md-nav__link" for="__nav_3_2_3_1">
        开始
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="开始" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_3_1">
          <span class="md-nav__icon md-icon"></span>
          开始
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH01-%E8%B5%B0%E8%BF%9BJava/" class="md-nav__link">
        CH01-走近 Java
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_3_2" type="checkbox" id="__nav_3_2_3_2" >
      
      <label class="md-nav__link" for="__nav_3_2_3_2">
        内存管理
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="内存管理" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_3_2">
          <span class="md-nav__icon md-icon"></span>
          内存管理
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH02-%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E4%B8%8E%E6%BA%A2%E5%87%BA%E5%BC%82%E5%B8%B8/" class="md-nav__link">
        CH02-内存区域与溢出
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH03-%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E4%B8%8E%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5/" class="md-nav__link">
        CH03-垃圾收集与分配策略
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH04-%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86/" class="md-nav__link">
        CH04-性能监控与故障处理
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH05-%E8%B0%83%E4%BC%98%E6%A1%88%E4%BE%8B/" class="md-nav__link">
        CH05-调优案例
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_3_3" type="checkbox" id="__nav_3_2_3_3" >
      
      <label class="md-nav__link" for="__nav_3_2_3_3">
        执行子系统
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="执行子系统" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_3_3">
          <span class="md-nav__icon md-icon"></span>
          执行子系统
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH06-%E7%B1%BB%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84/" class="md-nav__link">
        CH06-类文件结构
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH07-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/" class="md-nav__link">
        CH07-类加载
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH08-%E5%AD%97%E8%8A%82%E7%A0%81%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E/" class="md-nav__link">
        CH08-字节码执行引擎
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH09-%E6%A1%88%E4%BE%8B%E4%B8%8E%E5%AE%9E%E6%88%98/" class="md-nav__link">
        CH09-案例与实战
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_3_4" type="checkbox" id="__nav_3_2_3_4" >
      
      <label class="md-nav__link" for="__nav_3_2_3_4">
        编译与优化
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="编译与优化" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_3_4">
          <span class="md-nav__icon md-icon"></span>
          编译与优化
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH10-%E7%BC%96%E8%AF%91%E6%9C%9F%E4%BC%98%E5%8C%96/" class="md-nav__link">
        CH10-编译期优化
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH11-%E8%BF%90%E8%A1%8C%E6%97%B6%E4%BC%98%E5%8C%96/" class="md-nav__link">
        CH11-运行时优化
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_3_5" type="checkbox" id="__nav_3_2_3_5" >
      
      <label class="md-nav__link" for="__nav_3_2_3_5">
        高效并发
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="高效并发" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_3_5">
          <span class="md-nav__icon md-icon"></span>
          高效并发
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH12-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/" class="md-nav__link">
        CH12-内存模型与线程
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/CH13-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E4%B8%8E%E9%94%81%E4%BC%98%E5%8C%96/" class="md-nav__link">
        CH13-线程安全与锁优化
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_3_6" type="checkbox" id="__nav_3_2_3_6" >
      
      <label class="md-nav__link" for="__nav_3_2_3_6">
        附录
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="附录" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_3_6">
          <span class="md-nav__icon md-icon"></span>
          附录
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/Endix-B-%E6%8C%87%E4%BB%A4%E8%A1%A8/" class="md-nav__link">
        Endix-B-字节码指令
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-jvm-dive-v2/Endix-C-%E5%8F%82%E6%95%B0%E8%A1%A8/" class="md-nav__link">
        Endix-C-虚拟机参数
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        Java JVM 深入理解 V3
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      <label class="md-nav__link" for="__nav_3_3">
        并发
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="并发" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          并发
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_1" type="checkbox" id="__nav_3_3_1" >
      
      <label class="md-nav__link" for="__nav_3_3_1">
        Java 并发实战
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Java 并发实战" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_3_1">
          <span class="md-nav__icon md-icon"></span>
          Java 并发实战
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH01-%E7%AE%80%E4%BB%8B/" class="md-nav__link">
        CH01-简介
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH02-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E6%80%A7/" class="md-nav__link">
        CH02-线程安全性
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH03-%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB/" class="md-nav__link">
        CH03-对象共享
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH04-%E5%AF%B9%E8%B1%A1%E7%BB%84%E5%90%88/" class="md-nav__link">
        CH04-对象组合
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH05-%E5%9F%BA%E7%A1%80%E6%9E%84%E5%BB%BA%E5%9D%97/" class="md-nav__link">
        CH05-基础构建块
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH06-%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C/" class="md-nav__link">
        CH06-任务执行
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH07-%E5%8F%96%E6%B6%88%E5%85%B3%E9%97%AD/" class="md-nav__link">
        CH07-取消关闭
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH08-%E7%BA%BF%E7%A8%8B%E6%B1%A0/" class="md-nav__link">
        CH08-线程池
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH09-GUI%E5%BA%94%E7%94%A8/" class="md-nav__link">
        CH09-GUI应用
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH10-%E6%B4%BB%E8%B7%83%E6%80%A7%E5%8D%B1%E9%99%A9/" class="md-nav__link">
        CH10-活跃性危险
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH11-%E6%80%A7%E8%83%BD%E4%B8%8E%E4%BC%B8%E7%BC%A9/" class="md-nav__link">
        CH11-性能与伸缩
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH12-%E6%B5%8B%E8%AF%95/" class="md-nav__link">
        CH12-测试
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH13-%E6%98%BE%E5%BC%8F%E9%94%81/" class="md-nav__link">
        CH13-显式锁
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH14-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%89%A9%E5%B1%95/" class="md-nav__link">
        CH14-自定义扩展
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH15-%E5%8E%9F%E5%AD%90%E4%B8%8E%E9%9D%9E%E9%98%BB%E5%A1%9E%E5%90%8C%E6%AD%A5/" class="md-nav__link">
        CH15-原子与非阻塞同步
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-con-practice/CH16-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        CH16-内存模型
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        Java 并发模式
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3" type="checkbox" id="__nav_3_3_3" >
      
      <label class="md-nav__link" for="__nav_3_3_3">
        深入理解并行
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="深入理解并行" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_3_3">
          <span class="md-nav__icon md-icon"></span>
          深入理解并行
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH01/" class="md-nav__link">
        CH01-关于本书
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH02/" class="md-nav__link">
        CH02-简介
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH03/" class="md-nav__link">
        CH03-硬件特性
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH04/" class="md-nav__link">
        CH04-并行工具
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH05/" class="md-nav__link">
        CH05-计数
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH06/" class="md-nav__link">
        CH06-分割同步设计
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH07/" class="md-nav__link">
        CH07-锁
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH08/" class="md-nav__link">
        CH08-数据所有权
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH09/" class="md-nav__link">
        CH09-延后处理
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH10/" class="md-nav__link">
        CH10-数据结构
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH11/" class="md-nav__link">
        CH11-验证
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH12/" class="md-nav__link">
        CH12-形式验证
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH13/" class="md-nav__link">
        CH13-综合应用
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH14/" class="md-nav__link">
        CH14-高级同步
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/CH15/" class="md-nav__link">
        CH15-高级同步-内存序
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dive-parallel/Endix/" class="md-nav__link">
        ENDIX-C-内存屏障
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_4" type="checkbox" id="__nav_3_3_4" >
      
      <label class="md-nav__link" for="__nav_3_3_4">
        七周七并发模型
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="七周七并发模型" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_3_4">
          <span class="md-nav__icon md-icon"></span>
          七周七并发模型
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../seven-con-model/CH01/" class="md-nav__link">
        CH01-概述
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../seven-con-model/CH02/" class="md-nav__link">
        CH02-线程与锁
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../seven-con-model/CH03/" class="md-nav__link">
        CH03-函数式编程
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../seven-con-model/CH04/" class="md-nav__link">
        CH04-分离标识与状态
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../seven-con-model/CH05/" class="md-nav__link">
        CH05-Actor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../seven-con-model/CH06/" class="md-nav__link">
        CH06-CSP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../seven-con-model/CH07/" class="md-nav__link">
        CH07-数据并行
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../seven-con-model/CH08/" class="md-nav__link">
        CH08-Lambda 架构
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../seven-con-model/CH09/" class="md-nav__link">
        CH09-未来方向
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      <label class="md-nav__link" for="__nav_3_4">
        Scala
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Scala" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Scala
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_1" type="checkbox" id="__nav_3_4_1" >
      
      <label class="md-nav__link" for="__nav_3_4_1">
        Scala 精要
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Scala 精要" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_4_1">
          <span class="md-nav__icon md-icon"></span>
          Scala 精要
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/case-class/" class="md-nav__link">
        Case Class
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/functional-1/" class="md-nav__link">
        函数式-基础
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/functional-2/" class="md-nav__link">
        函数式-用例
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/future-1/" class="md-nav__link">
        Future-基础
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/future-2/" class="md-nav__link">
        Future-用例
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/future-3/" class="md-nav__link">
        Future-集合
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/future-4/" class="md-nav__link">
        Future-Promise
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/implicits-1/" class="md-nav__link">
        Implicits-基础
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/implicits-2/" class="md-nav__link">
        Implicits-进阶
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/trait-1/" class="md-nav__link">
        Trait-基础
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/trait-2/" class="md-nav__link">
        Trait-用例
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/try/" class="md-nav__link">
        Try
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/type-1/" class="md-nav__link">
        Type-用例
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/type-2/" class="md-nav__link">
        None
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/type-2/" class="md-nav__link">
        Type-进阶
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/primitive/" class="md-nav__link">
        Primitive
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/numbers/" class="md-nav__link">
        Numbers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/strings/" class="md-nav__link">
        String
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/control/" class="md-nav__link">
        Control
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/pattern-match/" class="md-nav__link">
        Pattern Match
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/class-object-1/" class="md-nav__link">
        Class Object: 基础
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/class-object-2/" class="md-nav__link">
        Class Object: 类
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/class-object-3/" class="md-nav__link">
        Class Object: 方法
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/class-object-4/" class="md-nav__link">
        Class Object: 对象
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/class-object-5/" class="md-nav__link">
        函数式对象
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/class-object-6/" class="md-nav__link">
        整体类层级
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/class-object-7/" class="md-nav__link">
        组合继承
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/package/" class="md-nav__link">
        Package
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/sbt/" class="md-nav__link">
        SBT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/predef/" class="md-nav__link">
        Predef
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/io/" class="md-nav__link">
        I/O
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/reserved/" class="md-nav__link">
        保留字
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/exception/" class="md-nav__link">
        Exception
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/annotation/" class="md-nav__link">
        Inject Type
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/type-class/" class="md-nav__link">
        Type Class
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/map/" class="md-nav__link">
        Map Flatmap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/generic/" class="md-nav__link">
        泛型型变
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/common/" class="md-nav__link">
        常见问题
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/placeholder/" class="md-nav__link">
        占位符
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/multi-vars/" class="md-nav__link">
        多变量赋值
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/constructor/" class="md-nav__link">
        构造器
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/type-system/" class="md-nav__link">
        类型系统
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/functional/" class="md-nav__link">
        函数式入门
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/monoid/" class="md-nav__link">
        Monoid
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/func-type-class/" class="md-nav__link">
        函数式与类型类
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/async-programming/" class="md-nav__link">
        异步编程
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/scala-style/" class="md-nav__link">
        战略Scala风格：最小功率的原理
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_2" type="checkbox" id="__nav_3_4_2" >
      
      <label class="md-nav__link" for="__nav_3_4_2">
        Scala 函数式
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Scala 函数式" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_4_2">
          <span class="md-nav__icon md-icon"></span>
          Scala 函数式
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala-func/CH00-%E7%B2%BE%E8%A6%81/" class="md-nav__link">
        CH00-精要
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala-func/CH01-%E5%AE%9A%E4%B9%89/" class="md-nav__link">
        CH01-定义
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala-func/CH02-%E5%87%BD%E6%95%B0/" class="md-nav__link">
        CH02-函数
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala-func/CH03-%E6%95%B0%E6%8D%AE/" class="md-nav__link">
        CH03-数据
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scala-func/CH04-%E5%BC%82%E5%B8%B8/" class="md-nav__link">
        CH04-异常
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" checked>
      
      <label class="md-nav__link" for="__nav_3_5">
        设计模式
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="设计模式" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          设计模式
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5_1" type="checkbox" id="__nav_3_5_1" >
      
      <label class="md-nav__link" for="__nav_3_5_1">
        Java 模式
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Java 模式" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_5_1">
          <span class="md-nav__icon md-icon"></span>
          Java 模式
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH01/" class="md-nav__link">
        CH01-创建型-简单工厂
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH02/" class="md-nav__link">
        CH02-创建型-工厂方法
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH03/" class="md-nav__link">
        CH03-创建型-抽象工厂
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH04/" class="md-nav__link">
        CH04-创建型-建造者
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH05/" class="md-nav__link">
        CH05-创建型-单例
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH06/" class="md-nav__link">
        CH06-结构型-适配器
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH07/" class="md-nav__link">
        CH07-结构型-桥接
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH08/" class="md-nav__link">
        CH08-结构型-装饰器
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH09/" class="md-nav__link">
        CH09-结构型-外观
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH10/" class="md-nav__link">
        CH10-结构型-享元
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH11/" class="md-nav__link">
        CH11-结构型-代理
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH12/" class="md-nav__link">
        CH12-行为型-命令
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH13/" class="md-nav__link">
        CH13-行为型-中介者
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH14/" class="md-nav__link">
        CH14-行为型-观察者
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH15/" class="md-nav__link">
        CH15-行为型-状态
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../java-pattern/CH16/" class="md-nav__link">
        CH16-行为型-策略
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5_2" type="checkbox" id="__nav_3_5_2" checked>
      
      <label class="md-nav__link" for="__nav_3_5_2">
        Scala 模式
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Scala 模式" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_5_2">
          <span class="md-nav__icon md-icon"></span>
          Scala 模式
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH01-%E6%A8%A1%E5%BC%8F%E5%88%86%E7%B1%BB/" class="md-nav__link">
        CH01-模式分类
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH02-%E7%89%B9%E8%B4%A8%E4%B8%8E%E6%B7%B7%E5%85%A5%E7%BB%84%E5%90%88/" class="md-nav__link">
        CH02-特质与混入组合
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH03-%E7%BB%9F%E4%B8%80%E5%8C%96/" class="md-nav__link">
        CH03-统一化
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          CH04-抽象与自类型
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        CH04-抽象与自类型
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    泛型与抽象类型
  </a>
  
    <nav class="md-nav" aria-label="泛型与抽象类型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    泛型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    抽象类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    泛型与抽象类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    应用建议
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    多态的三种形式
  </a>
  
    <nav class="md-nav" aria-label="多态的三种形式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    子类型多态
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    参数式多态
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ad-hoc" class="md-nav__link">
    专用(ad-hoc)多态
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    自类型
  </a>
  
    <nav class="md-nav" aria-label="自类型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    使用自类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    自类型与继承对比
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH05-AOP%20%E4%B8%8E%E7%BB%84%E4%BB%B6/" class="md-nav__link">
        CH05-AOP 与组件
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH06-%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH06-创建型模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH06-1-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95/" class="md-nav__link">
        CH06-1-工厂方法
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH06-2-%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82/" class="md-nav__link">
        CH06-2-抽象工厂
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH06-3-%E5%85%B6%E4%BB%96%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH06-3-其他工厂模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH06-4-%E6%87%92%E5%88%9D%E5%A7%8B%E5%8C%96/" class="md-nav__link">
        CH06-4-懒初始化
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH06-5-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH06-5-单例模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH06-6-%E6%9E%84%E5%BB%BA%E5%99%A8%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH06-6-构建器模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH06-7-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH06-7-原型模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH07-%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH07-结构型模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH07-1-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH07-1-适配器模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH07-2-%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH07-2-装饰器模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH07-3-%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH07-3-桥接模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH07-4-%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH07-4-组合模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH07-5-%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH07-5-外观模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH07-6-%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH07-6-享元模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH07-7-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        CH07-7-代理模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH08-%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F-1/" class="md-nav__link">
        CH08-行为型模式-1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH09-%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F-2/" class="md-nav__link">
        CH09-行为型模式-2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH10-%E5%87%BD%E6%95%B0%E5%BC%8F%E6%A8%A1%E5%BC%8F%E7%90%86%E8%AE%BA/" class="md-nav__link">
        CH10-函数式模式理论
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH11-%E5%87%BD%E6%95%B0%E5%BC%8F%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8/" class="md-nav__link">
        CH11-函数式模式应用
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CH12-%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8/" class="md-nav__link">
        CH12-实际应用
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Project
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Project" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Project
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      <label class="md-nav__link" for="__nav_4_1">
        Spring
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Spring" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Spring
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../spring/CH01-IOC/" class="md-nav__link">
        CH01-IOC
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../spring/CH02-SpringIOC/" class="md-nav__link">
        CH02-SpringIOC
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../spring/CH03-Bean%E5%8A%A0%E8%BD%BD/" class="md-nav__link">
        CH03-Bean加载
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../spring/CH04-IOC%E6%BA%90%E7%A0%81/" class="md-nav__link">
        CH04-IOC源码
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../spring/CH05-%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96/" class="md-nav__link">
        CH05-循环依赖
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../spring/CH06-AOP/" class="md-nav__link">
        CH06-AOP
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Architect
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Architect" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Architect
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" >
      
      <label class="md-nav__link" for="__nav_5_1">
        存储系统
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="存储系统" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          存储系统
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_1" type="checkbox" id="__nav_5_1_1" >
      
      <label class="md-nav__link" for="__nav_5_1_1">
        RDBMS
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="RDBMS" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_1_1">
          <span class="md-nav__icon md-icon"></span>
          RDBMS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../rdbms/CH01-%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F/" class="md-nav__link">
        CH01-工作方式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../rdbms/CH02-%E8%AE%BE%E8%AE%A1%E7%90%86%E8%AE%BA/" class="md-nav__link">
        CH02-设计理论
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../rdbms/CH03-%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B/" class="md-nav__link">
        CH03-设计流程
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../rdbms/CH04-%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/" class="md-nav__link">
        CH04-核心知识
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_2" type="checkbox" id="__nav_5_1_2" >
      
      <label class="md-nav__link" for="__nav_5_1_2">
        SQL
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="SQL" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_1_2">
          <span class="md-nav__icon md-icon"></span>
          SQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/CH01-%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        CH01-语法基础
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/CH02-%E6%9F%A5%E8%AF%A2%E7%BB%83%E4%B9%A0/" class="md-nav__link">
        CH02-查询练习
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/CH03-%E6%9F%A5%E8%AF%A2%E8%BF%9B%E9%98%B6/" class="md-nav__link">
        CH03-查询进阶
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/CH04-%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/" class="md-nav__link">
        CH04-查询优化
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_3" type="checkbox" id="__nav_5_1_3" >
      
      <label class="md-nav__link" for="__nav_5_1_3">
        MySQL
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="MySQL" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_1_3">
          <span class="md-nav__icon md-icon"></span>
          MySQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../mysql/CH01-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="md-nav__link">
        CH01-数据类型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../mysql/CH02-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/" class="md-nav__link">
        CH02-存储引擎
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../mysql/CH03-%E7%B4%A2%E5%BC%95B%2B%E6%A0%91/" class="md-nav__link">
        CH03-索引B+树
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../mysql/CH04-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="md-nav__link">
        CH04-性能优化
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../mysql/CH05-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" class="md-nav__link">
        CH05-分库分表
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../mysql/CH06-%E5%A4%8D%E5%88%B6%E5%88%86%E7%A6%BB/" class="md-nav__link">
        CH06-复制分离
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../mysql/CH07-%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/" class="md-nav__link">
        CH07-执行过程
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_4" type="checkbox" id="__nav_5_1_4" >
      
      <label class="md-nav__link" for="__nav_5_1_4">
        Redis
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Redis" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_1_4">
          <span class="md-nav__icon md-icon"></span>
          Redis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../redis/CH01-%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B/" class="md-nav__link">
        CH01-基本类型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../redis/CH02-%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B/" class="md-nav__link">
        CH02-高级类型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../redis/CH03-Stream/" class="md-nav__link">
        CH03-Stream
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../redis/CH04-%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6/" class="md-nav__link">
        CH04-对象机制
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../redis/CH05-%E5%BA%95%E5%B1%82%E7%BB%93%E6%9E%84/" class="md-nav__link">
        CH05-底层结构
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        None
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      <label class="md-nav__link" for="__nav_5_2">
        微服务
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="微服务" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          微服务
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../micro-service/pattern-overview/" class="md-nav__link">
        架构模式概览
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../micro-service/ms-disasters/" class="md-nav__link">
        微服务灾难
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      <label class="md-nav__link" for="__nav_5_3">
        分布式
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="分布式" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          分布式
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/consistence/" class="md-nav__link">
        一致性模型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/acid/" class="md-nav__link">
        ACID 隔离级别
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/cap/" class="md-nav__link">
        CAP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/base/" class="md-nav__link">
        BASE
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/calm/" class="md-nav__link">
        CALM
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/gossip/" class="md-nav__link">
        Gossip
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/crdt/" class="md-nav__link">
        CRDT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/2pc/" class="md-nav__link">
        2PC
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/3pc/" class="md-nav__link">
        3PC
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/paxos/" class="md-nav__link">
        Paxos
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/zab/" class="md-nav__link">
        ZAB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/raft/" class="md-nav__link">
        Raft
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%80%E8%87%B4/" class="md-nav__link">
        分布式一致性
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" class="md-nav__link">
        分布式事务
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" class="md-nav__link">
        分布式锁
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/%E4%B8%80%E8%87%B4%E6%80%A7%E5%85%B1%E8%AF%86/" class="md-nav__link">
        一致性与共识算法
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../distribute/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C/" class="md-nav__link">
        一致性哈希算法
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        反应式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        数据密集
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        流式系统
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        消息系统
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        计算系统
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        运维交付
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        用户界面
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Interview
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Interview" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Interview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" >
      
      <label class="md-nav__link" for="__nav_6_1">
        数据结构
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="数据结构" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          数据结构
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH01-%E6%95%B0%E7%BB%84-%E9%93%BE%E8%A1%A8/" class="md-nav__link">
        CH01-数组/链表
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH02-%E5%93%88%E5%B8%8C%E8%A1%A8/" class="md-nav__link">
        CH02-哈希表
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH03-%E6%A0%91-%E4%BA%8C%E5%8F%89%E6%A0%91/" class="md-nav__link">
        CH03-树/二叉树
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH04-%E6%8E%92%E5%BA%8F%E4%BA%8C%E5%8F%89%E6%A0%91/" class="md-nav__link">
        CH04-排序二叉树
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH05-%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91/" class="md-nav__link">
        CH05-平衡二叉树
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH06-%E7%BA%A2%E9%BB%91%E6%A0%91/" class="md-nav__link">
        CH06-红黑树
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH07-%E5%93%88%E5%A4%AB%E6%9B%BC%E6%A0%91/" class="md-nav__link">
        CH07-哈夫曼树
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH08-%E5%89%8D%E7%BC%80%E6%A0%91/" class="md-nav__link">
        CH08-前缀树
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH09-%E5%9B%BE%E6%A6%82%E5%BF%B5/" class="md-nav__link">
        CH09-图概念
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH10-%E9%81%8D%E5%8E%86/" class="md-nav__link">
        CH10-图遍历
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH11-%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/" class="md-nav__link">
        CH11-最小生成树
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH12-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84/" class="md-nav__link">
        CH12-图最短路径
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH13-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        CH13-图拓扑排序
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH14-AOE-%E5%85%B3%E9%94%AE%E8%B7%AF%E5%BE%84/" class="md-nav__link">
        CH14-图-AOE-关键路径
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH15-Iterable/" class="md-nav__link">
        CH07-Iterable
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH16-Collection/" class="md-nav__link">
        CH16-Collection
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH17-List/" class="md-nav__link">
        CH17-List
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH18-ArrayList/" class="md-nav__link">
        CH18-ArrayList
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH19-Queue/" class="md-nav__link">
        CH19-Queue
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH20-Deque/" class="md-nav__link">
        CH20-Deque
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH21-ArrayQueue/" class="md-nav__link">
        CH21-ArrayQueue
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH22-PriorityQueue/" class="md-nav__link">
        CH22-PriorityQueue
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH23-LinkedList/" class="md-nav__link">
        CH23-LinkedList
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH24-Vector/" class="md-nav__link">
        CH24-Vector
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH25-Stack/" class="md-nav__link">
        CH25-Stack
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH26-Map/" class="md-nav__link">
        CH26-Map
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH27-SortedMap/" class="md-nav__link">
        CH27-SortedMap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH28-NavigableMap/" class="md-nav__link">
        CH28-NavigableMap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH29-TreeMap/" class="md-nav__link">
        CH29-TreeMap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH30-HashMap/" class="md-nav__link">
        CH30-HashMap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH31-LinkedHashMap/" class="md-nav__link">
        CH31-LinkedHashMap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH32-EnumMap/" class="md-nav__link">
        CH32-EnumMap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH33-HashTable/" class="md-nav__link">
        CH33-HashTable
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH34-Set/" class="md-nav__link">
        CH34-Set
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH35-EnumSet/" class="md-nav__link">
        CH35-EnumSet
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH36-HashSet/" class="md-nav__link">
        CH36-HashSet
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH37-LinkedHashSet/" class="md-nav__link">
        CH37-LinkedHashSet
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH38-TreeSet/" class="md-nav__link">
        CH38-TreeSet
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ds/CH39-FailFast/" class="md-nav__link">
        CH39-FailFast
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" >
      
      <label class="md-nav__link" for="__nav_6_2">
        排序算法
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="排序算法" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          排序算法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algo/CH01-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        CH01-冒泡排序
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algo/CH02-%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        CH02-选择排序
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algo/CH03-%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        CH03-插入排序
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algo/CH04-%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        CH04-希尔排序
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algo/CH05-%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        CH05-归并排序
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algo/CH06-%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        CH06-快速排序
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algo/CH07-%E5%A0%86%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        CH07-堆排序
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algo/CH08-%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        CH08-计数排序
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algo/CH09-%E6%A1%B6%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        CH09-桶排序
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algo/CH10-%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        CH10-基数排序
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" >
      
      <label class="md-nav__link" for="__nav_6_3">
        剑指 Offer
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="剑指 Offer" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          剑指 Offer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        None
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_4" type="checkbox" id="__nav_6_4" >
      
      <label class="md-nav__link" for="__nav_6_4">
        面试指南
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="面试指南" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          面试指南
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        None
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_5" type="checkbox" id="__nav_6_5" >
      
      <label class="md-nav__link" for="__nav_6_5">
        面试宝典
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="面试宝典" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          面试宝典
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        None
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_6" type="checkbox" id="__nav_6_6" >
      
      <label class="md-nav__link" for="__nav_6_6">
        面试金典
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="面试金典" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_6">
          <span class="md-nav__icon md-icon"></span>
          面试金典
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        None
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_7" type="checkbox" id="__nav_6_7" >
      
      <label class="md-nav__link" for="__nav_6_7">
        Leet Code
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Leet Code" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_7">
          <span class="md-nav__icon md-icon"></span>
          Leet Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        None
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../open-source/" class="md-nav__link">
        Open Source
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        Blog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../wip/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    泛型与抽象类型
  </a>
  
    <nav class="md-nav" aria-label="泛型与抽象类型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    泛型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    抽象类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    泛型与抽象类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    应用建议
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    多态的三种形式
  </a>
  
    <nav class="md-nav" aria-label="多态的三种形式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    子类型多态
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    参数式多态
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ad-hoc" class="md-nav__link">
    专用(ad-hoc)多态
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    自类型
  </a>
  
    <nav class="md-nav" aria-label="自类型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    使用自类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    自类型与继承对比
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="ch04-">CH04-抽象与自类型<a class="headerlink" href="#ch04-" title="Permanent link">&para;</a></h1>
<p>为了能够拥有易于扩展和维护的应用，在软件工程中设计和编写高质量的代码是非常重要的。这些活动要求开发者能够熟悉并正确理解领域，同时应用的需求也能被清晰的定义。如果缺少了任何一项，那么想要编写好的程序则会称为一个挑战。</p>
<p>很多时候，工程师使用一些抽象来建模“世界”。这有助于代码的可扩展性和可维护性，并能避免重复，这在在很多情况下可能会成为错误的原因。好的代码通常有多个小的组件构成，它们会互相依赖或集成。有多种不同的方式来实现抽象和集成。我们将会在本章中关注以下概念：</p>
<ul>
<li>抽象类型</li>
<li>多态</li>
<li>自类型</li>
</ul>
<p>这里所涉及的几个主题将非常有助于我们研究具体的设计模式。理解它们也能有助于理解那些基于它们的设计模式。此外，使用本章所涉及的这些概念本身就能有助于编写良好的代码。</p>
<h2 id="_1">泛型与抽象类型<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>参数化一个类的常用方式之一是使用值。这十分简单，可以通过向类的构造器参数传入不同的值来实现。在下面的例子中，我们可以向<code>Person</code>类的<code>name</code>参数传入不同的值来创建不同的实例：</p>
<div class="highlight"><pre><span></span><code><span class="k">case</span> <span class="k">class</span> <span class="nc">Person</span><span class="o">(</span><span class="n">name</span><span class="k">:</span><span class="kt">String</span><span class="o">)</span>
</code></pre></div>
<p>以这种方式我们能够创建不同的实例并将他们加以区分。但这样既不有趣也不是“火箭科学”。更进一步，我们会关注一些更加有趣的参数化来帮助我们编写更好的代码。</p>
<h3 id="_2">泛型<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>泛型是另一种参数化类的方式。当我们编写一个要操作多种不同类型的功能时，泛型会很有用，同时我们能够简单的推迟到最后再选择具体类型。一个例子是开发者所熟知的集合类。比如<code>List</code>，可以保存任何类型的数据，我们可以拥有整形、双精度浮点型、字符串、自定义类等等类型的列表。即便如此，列表的实现仍然总会是一样的。</p>
<p>我们同样可以参数化方法。比如，如果我们想要实现加法，对于不同的数字类型不会有什么不同之处。因此，我们可以使用泛型并仅实现方法一次，而不需要重载来适应世界上的每个类型。</p>
<p>让我们看一些例子：</p>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">Adder</span><span class="o">{</span>
  <span class="k">def</span> <span class="n">sum</span><span class="o">[</span><span class="kt">T</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">T</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span> <span class="kt">T</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">numeric</span><span class="k">:</span><span class="kt">Numeric</span><span class="o">[</span><span class="kt">T</span><span class="o">])</span><span class="k">:</span> <span class="kt">T</span> <span class="o">=</span> 
    <span class="n">numeric</span><span class="o">.</span><span class="n">plus</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<p>上面这段代码可能有点难懂，它定义了一个可以用于*numeric*类型的<code>sum</code>方法。这实质上是一个专用(ad-hoc)泛型的表示，我们将会在本章的后续部分讨论。</p>
<p>下面的代码展示了如何泛型一个能够包含任何数据的类：</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Container</span><span class="o">[</span><span class="kt">T</span><span class="o">](</span><span class="n">data</span><span class="k">:</span> <span class="kt">T</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">compare</span><span class="o">(</span><span class="n">other</span><span class="k">:</span><span class="kt">T</span><span class="o">)</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">equals</span><span class="o">(</span><span class="n">other</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<p>下面的片段展示了例子的用法：</p>
<div class="highlight"><pre><span></span><code><span class="k">object</span> <span class="nc">GenericsExample</span> <span class="k">extends</span> <span class="nc">App</span> <span class="k">with</span> <span class="nc">Adder</span> <span class="o">{</span>
  <span class="n">println</span><span class="o">(</span><span class="s">s&quot;1 + 3 = </span><span class="si">${</span><span class="n">sum</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span><span class="si">}</span><span class="s">&quot;</span><span class="o">)</span>
  <span class="n">println</span><span class="o">(</span><span class="s">s&quot;1.2 + 6.7 = </span><span class="si">${</span><span class="n">sum</span><span class="o">(</span><span class="mf">1.2</span><span class="o">,</span> <span class="mf">6.7</span><span class="o">)</span><span class="si">}</span><span class="s">&quot;</span><span class="o">)</span>

  <span class="c1">// compilation fails</span>
  <span class="c1">// System.out.println(s&quot;abc + cde = ${sum(&quot;abc&quot;, &quot;cde&quot;)}&quot;) </span>

  <span class="k">val</span> <span class="n">intContainer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Container</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
  <span class="n">println</span><span class="o">(</span><span class="s">s&quot;Comparing with int: </span><span class="si">${</span><span class="n">intContainer</span><span class="o">.</span><span class="n">compare</span><span class="o">(</span><span class="mi">11</span><span class="o">)</span><span class="si">}</span><span class="s">&quot;</span><span class="o">)</span>

  <span class="k">val</span> <span class="n">stringContainer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Container</span><span class="o">(</span><span class="s">&quot;some text&quot;</span><span class="o">)</span>
  <span class="n">println</span><span class="o">(</span><span class="s">s&quot;Comparing with string: </span><span class="si">${</span><span class="n">stringContainer</span><span class="o">.</span><span class="n">compare</span><span class="o">(</span><span class="s">&quot;some text&quot;</span><span class="o">)</span><span class="si">}</span><span class="s">&quot;</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<p>运行程序将会得到如下输出：</p>
<div class="highlight"><pre><span></span><code><span class="mi">1</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">=</span> <span class="mi">4</span>
<span class="mf">1.2</span> <span class="o">+</span> <span class="mf">6.7</span> <span class="o">=</span> <span class="mf">7.9</span>
<span class="nc">Comparing</span> <span class="k">with</span> <span class="n">int</span><span class="k">:</span> <span class="kt">false</span>
<span class="nc">Comparing</span> <span class="k">with</span> <span class="n">string</span><span class="k">:</span> <span class="kt">true</span>
</code></pre></div>
<h3 id="_3">抽象类型<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>另一种参数化类的方式是使用抽象类型。泛型在其他语言中都有对应的实现，比如 Java。但是 Java 中却不存在抽象类型。让我们看一下上面<code>Container</code>的例子如何转换为以抽象类型的方式实现：</p>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">ContainerAT</span><span class="o">{</span>
  <span class="k">type</span> <span class="kt">T</span>
  <span class="k">val</span> <span class="n">data</span><span class="k">:</span><span class="kt">T</span>

  <span class="k">def</span> <span class="n">conpare</span><span class="o">(</span><span class="n">other</span><span class="k">:</span><span class="kt">T</span><span class="o">)</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">equals</span><span class="o">(</span><span class="n">other</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<p>然后在类中使用这个特质：</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StringContainer</span><span class="o">(</span><span class="k">val</span> <span class="n">data</span><span class="k">:</span><span class="kt">String</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">ContainerAT</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">type</span> <span class="kt">T</span> <span class="o">=</span> <span class="nc">String</span>
<span class="o">}</span>
</code></pre></div>
<p>然后就可以使用与前面相同的方式来使用这个类：</p>
<div class="highlight"><pre><span></span><code><span class="k">object</span> <span class="nc">AbstractTypesExample</span> <span class="k">extends</span> <span class="nc">App</span><span class="o">{</span>
  <span class="k">val</span> <span class="n">stringContainer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringContainer</span><span class="o">(</span><span class="s">&quot;some text&quot;</span><span class="o">)</span>
  <span class="n">println</span><span class="o">(</span><span class="s">s&quot;Comparing with string: </span><span class="si">${</span><span class="n">stringContainer</span><span class="o">.</span><span class="n">compare</span><span class="o">(</span><span class="s">&quot;some text&quot;</span><span class="o">)</span><span class="si">}</span><span class="s">&quot;</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<p>同样可以得到与预期一样的输出：</p>
<div class="highlight"><pre><span></span><code><span class="n">comparing</span> <span class="k">with</span> <span class="n">string</span><span class="k">:</span> <span class="kt">true</span>
</code></pre></div>
<p>当然我们也可以以类似的方式应用于泛型的例子，只需要创建一个特质的实例然后指定类型参数。这意味着泛型和抽象类型为我们提供了两种方式来实现相同的一件事。</p>
<h3 id="_4">泛型与抽象类型<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>那为什么 Scala 中同时拥有泛型和抽象类型呢？它们有什么不同吗？或者如何选择使用哪一个呢？我们会在这里给你答案。</p>
<p>泛型和抽象类型是可以互换的。虽然可能需要额外的工作，但是我们能够使用泛型来提供抽象类型所带来的一切。如何选择取决于不同的因素，有的是个人偏好，比如有人是为了可读性，而有人则是为了类的不同用法。</p>
<p>让我们看一个例子来尝试理解泛型与抽象类型可以在合适以及如何使用。在这个例子中我们会使用打印机。大家都知道它们有多种类型——纸质打印机、3D 打印机等等。每种都是用不同的材料来打印，比如墨粉、墨水或塑料，同时它们也会于打印到不同的媒介上——纸或甚至是空气中。我们可以使用抽象类型来描述这些：</p>
<div class="highlight"><pre><span></span><code><span class="k">abstract</span> <span class="k">class</span> <span class="nc">PrintData</span>
<span class="k">abstract</span> <span class="k">class</span> <span class="nc">PrintMaterial</span>
<span class="k">abstract</span> <span class="k">class</span> <span class="nc">PrintMedia</span>
<span class="k">trait</span> <span class="nc">Printer</span><span class="o">{</span>
  <span class="k">type</span> <span class="kt">Data</span> <span class="k">&lt;:</span> <span class="kt">PrintData</span>
  <span class="k">type</span> <span class="kt">Material</span> <span class="k">&lt;:</span> <span class="kt">PrintMaterial</span>
  <span class="k">type</span> <span class="kt">Media</span> <span class="k">&lt;:</span> <span class="kt">PrintMedia</span>

  <span class="k">def</span> <span class="n">print</span><span class="o">(</span><span class="n">data</span><span class="k">:</span><span class="kt">Data</span><span class="o">,</span> <span class="n">material</span><span class="k">:</span><span class="kt">Material</span><span class="o">,</span> <span class="n">media</span><span class="k">:</span> <span class="kt">Media</span><span class="o">)</span> <span class="o">=</span> 
    <span class="s">s&quot;Printing </span><span class="si">$data</span><span class="s"> with </span><span class="si">$material</span><span class="s"> material on </span><span class="si">$media</span><span class="s"> media.&quot;</span>
<span class="o">}</span>
</code></pre></div>
<p>为了能够调用这个<code>print</code>方法，我们需要拥有不同的媒介、数据类型及原料：</p>
<div class="highlight"><pre><span></span><code><span class="k">case</span> <span class="k">class</span> <span class="nc">Paper</span><span class="o">()</span> <span class="k">extends</span> <span class="nc">PrintMedia</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Air</span><span class="o">()</span> <span class="k">extends</span> <span class="nc">PrintMedia</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Text</span><span class="o">()</span> <span class="k">extends</span> <span class="nc">PrintData</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Model</span><span class="o">()</span> <span class="k">extends</span> <span class="nc">PrintData</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Toner</span><span class="o">()</span> <span class="k">extends</span> <span class="nc">PrintMaterial</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Plastic</span><span class="o">()</span> <span class="k">extends</span> <span class="nc">PrintMaterial</span>
</code></pre></div>
<p>现在让我们创建两个具体的打印机实现，一个激光打印机，一个 3D 打印机：</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LaserPrinter</span> <span class="k">extends</span> <span class="nc">Printer</span> <span class="o">{</span>
  <span class="k">type</span> <span class="kt">Media</span> <span class="o">=</span> <span class="nc">Paper</span>
  <span class="k">type</span> <span class="kt">Data</span> <span class="o">=</span> <span class="nc">Text</span>
  <span class="k">type</span> <span class="kt">Material</span> <span class="o">=</span> <span class="nc">Toner</span>
<span class="o">}</span>

<span class="k">class</span> <span class="nc">ThreeDPrinter</span> <span class="k">extends</span> <span class="nc">Printer</span> <span class="o">{</span>
  <span class="k">type</span> <span class="kt">Media</span> <span class="o">=</span> <span class="nc">Air</span>
  <span class="k">type</span> <span class="kt">Data</span> <span class="o">=</span> <span class="nc">Model</span>
  <span class="k">type</span> <span class="kt">Material</span> <span class="o">=</span> <span class="nc">Plastic</span>
<span class="o">}</span>
</code></pre></div>
<p>在上面的代码中，我们实际上已经给出了数据类型、媒介，以及打印机可以使用的材料的说明。我们不能要求 3D 打印机使用墨粉来打印，或者激光打印机直接打印在空气中。下面是如何使用这两个打印机：</p>
<div class="highlight"><pre><span></span><code><span class="k">object</span> <span class="nc">PrinterExample</span> <span class="k">extends</span> <span class="nc">App</span><span class="o">{</span>
  <span class="k">val</span> <span class="n">laser</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LaserPrinter</span>
  <span class="k">val</span> <span class="n">threeD</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ThreeDPrinter</span>

  <span class="n">println</span><span class="o">(</span><span class="n">laser</span><span class="o">.</span><span class="n">print</span><span class="o">(</span><span class="nc">Text</span><span class="o">(),</span> <span class="nc">Toner</span><span class="o">(),</span> <span class="nc">Paper</span><span class="o">()))</span>
  <span class="n">println</span><span class="o">(</span><span class="n">threeD</span><span class="o">.</span><span class="n">print</span><span class="o">(</span><span class="nc">Model</span><span class="o">(),</span> <span class="nc">Plastic</span><span class="o">(),</span> <span class="nc">Air</span><span class="o">()))</span>
<span class="o">}</span>
</code></pre></div>
<p>这段代码拥有很好的可读性，它支持我们轻松的指定具体类。使事物更易于建模。有意思的是将其转换为泛型的方式实现则会是这样：</p>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">GenericPrinter</span><span class="o">[</span><span class="kt">Data</span> <span class="k">&lt;:</span><span class="kt">PrintData</span><span class="p">,</span> <span class="kt">Material</span> <span class="k">&lt;:</span> <span class="kt">PrintMaterial</span><span class="p">,</span> <span class="kt">Media</span> <span class="k">&lt;:</span> <span class="kt">PrintMedia</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">print</span><span class="o">(</span><span class="n">data</span><span class="k">:</span> <span class="kt">Data</span><span class="o">,</span> <span class="n">material</span><span class="k">:</span> <span class="kt">Material</span><span class="o">,</span> <span class="n">media</span><span class="k">:</span> <span class="kt">Media</span><span class="o">)</span> <span class="o">=</span>
    <span class="s">s&quot;Printing </span><span class="si">$data</span><span class="s"> with </span><span class="si">$material</span><span class="s"> material on </span><span class="si">$media</span><span class="s"> media.&quot;</span>
<span class="o">}</span>
</code></pre></div>
<p>这个特质很容易被描述，可读性和逻辑性在这里也没有得到损害。然而，我们必须以如下方式来表示具体类：</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">GenericLaserPrinter</span><span class="o">[</span><span class="kt">Data</span> <span class="k">&lt;:</span> <span class="kt">Text</span><span class="p">,</span> <span class="kt">Material</span> <span class="k">&lt;:</span> <span class="kt">Toner</span><span class="p">,</span> <span class="kt">Media</span> <span class="k">&lt;:</span> <span class="kt">Paper</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">GenericPrinter</span><span class="o">[</span><span class="kt">Data</span><span class="p">,</span> <span class="kt">Material</span><span class="p">,</span> <span class="kt">Media</span><span class="o">]</span>

<span class="k">class</span> <span class="nc">GenericThreeDPrinter</span><span class="o">[</span><span class="kt">Data</span> <span class="k">&lt;:</span> <span class="kt">Model</span><span class="p">,</span> <span class="kt">Material</span> <span class="k">&lt;:</span> <span class="kt">Plastic</span><span class="p">,</span> <span class="kt">Media</span> <span class="k">&lt;:</span> <span class="kt">Air</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">GenericPrinter</span><span class="o">[</span><span class="kt">Data</span><span class="p">,</span> <span class="kt">Material</span><span class="p">,</span> <span class="kt">Media</span><span class="o">]</span>
</code></pre></div>
<p>这会让具体类的定义变得相当长，开发者也更可能犯错。下面的片段展示了如何使用这些类来创建实例：</p>
<div class="highlight"><pre><span></span><code><span class="k">val</span> <span class="n">genericLaser</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenericLaserPrinter</span><span class="o">[</span><span class="kt">Text</span><span class="p">,</span> <span class="kt">Toner</span><span class="p">,</span> <span class="kt">Paper</span><span class="o">]</span>
<span class="k">val</span> <span class="n">genericThreeD</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenericThreeDPrinter</span><span class="o">[</span><span class="kt">Model</span><span class="p">,</span> <span class="kt">Plastic</span><span class="p">,</span> <span class="kt">Air</span><span class="o">]</span>
<span class="n">println</span><span class="o">(</span><span class="n">genericLaser</span><span class="o">.</span><span class="n">print</span><span class="o">(</span><span class="nc">Text</span><span class="o">(),</span> <span class="nc">Toner</span><span class="o">(),</span> <span class="nc">Paper</span><span class="o">()))</span>
<span class="n">println</span><span class="o">(</span><span class="n">genericThreeD</span><span class="o">.</span><span class="n">print</span><span class="o">(</span><span class="nc">Model</span><span class="o">(),</span> <span class="nc">Plastic</span><span class="o">(),</span> <span class="nc">Air</span><span class="o">()))</span>
</code></pre></div>
<p>你会发现每次在创建这些实例的时候都需要指定类型。假如我们拥有更多的泛型类型，或者一些类型本身又是基于泛型，比如集合。这很快会变得冗长，而且让人难以理解这些代码的实际用途。</p>
<p>另一方面，使用泛型能够允许我们复用<code>GenericPrinter</code>而不必为不同的打印机表示进行显式的子类化。然而这也存在逻辑错误的风险：</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">GenericPrinterImpl</span><span class="o">[</span><span class="kt">Data</span> <span class="k">&lt;:</span> <span class="kt">PrintData</span><span class="p">,</span> <span class="kt">Material</span> <span class="k">&lt;:</span> <span class="kt">PrintMaterial</span><span class="p">,</span> <span class="kt">Media</span> <span class="k">&lt;:</span> <span class="kt">PrintMedia</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">GenericPrinter</span><span class="o">[</span><span class="kt">Data</span><span class="p">,</span> <span class="kt">Material</span><span class="p">,</span> <span class="kt">Media</span><span class="o">]</span>
</code></pre></div>
<p>如果像相面这样使用则会有犯错的危险：</p>
<div class="highlight"><pre><span></span><code><span class="k">val</span> <span class="n">wrongPrinter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenericPrinterImpl</span><span class="o">[</span><span class="kt">Model</span><span class="p">,</span> <span class="kt">Toner</span><span class="p">,</span> <span class="kt">Air</span><span class="o">]</span>
<span class="n">println</span><span class="o">(</span><span class="n">wrongPrinter</span><span class="o">.</span><span class="n">print</span><span class="o">(</span><span class="nc">Model</span><span class="o">(),</span> <span class="nc">Toner</span><span class="o">(),</span> <span class="nc">Air</span><span class="o">()))</span>
</code></pre></div>
<h3 id="_5">应用建议<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>上面的例子展示了使用泛型和抽象类型的简单比较。两种都是有用的概念；然而，清晰的知道他们具体的用法对于在需要的场景选择正确的一个是很重要的。下面的一些技巧能够帮助你做出正确的选择：</p>
<ul>
<li>泛型：</li>
<li>如果你仅需要类型实例化。一个好的示范是标准的集合类。</li>
<li>如果你正在创建一族类型。</li>
<li>抽象类：</li>
<li>如果你想允许别人能够通过特质混入类型。</li>
<li>如果你需要在一些允许互换的场景拥有更好的可读性。</li>
<li>如果你想在客户端代码中隐藏类型定义。</li>
</ul>
<h2 id="_6">多态的三种形式<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p>多态是任何使用面向对象编程语言的开发者都知道的东西。</p>
<blockquote>
<p>多态帮助我们编写通用的代码以进行复用并应用到多样性的类型中。</p>
</blockquote>
<p>知道有多种不同类型的多态是很重要的，这节中我们将会讨论它们。</p>
<h3 id="_7">子类型多态<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>这是一种每个开发者都知道的多态，它与在具体类中覆写方法相关。考虑下面简单的层级：</p>
<div class="highlight"><pre><span></span><code><span class="k">abstract</span> <span class="k">class</span> <span class="nc">Item</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">pack</span><span class="k">:</span><span class="kt">String</span>
<span class="o">}</span>

<span class="k">class</span> <span class="nc">Fruit</span> <span class="k">extends</span> <span class="nc">Item</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">pack</span><span class="k">:</span><span class="kt">String</span> <span class="o">=</span> <span class="s">&quot;I&#39;m a fruit and I&#39;m packed in a bag.&quot;</span>
<span class="o">}</span>

<span class="k">class</span> <span class="nc">Drink</span> <span class="k">extends</span> <span class="nc">Item</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">pack</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">&quot;I&#39;m a drink and I&#39;m packed in a bottle.&quot;</span>
<span class="o">}</span>
</code></pre></div>
<p>现在我们拥有一个装满物品的购物篮，对每一个都进行<code>pack</code>调用：</p>
<div class="highlight"><pre><span></span><code><span class="k">object</span> <span class="nc">SubtypePolymorphismExample</span> <span class="k">extends</span> <span class="nc">App</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">shoppingBasket</span><span class="k">:</span><span class="kt">List</span><span class="o">[</span><span class="kt">Item</span><span class="o">]</span> <span class="o">=</span> <span class="nc">List</span><span class="o">(</span>
    <span class="k">new</span> <span class="nc">Fruit</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Drink</span>
  <span class="o">)</span>
  <span class="n">shoppingBasket</span><span class="o">.</span><span class="n">foreach</span><span class="o">(</span><span class="n">i</span> <span class="o">=&gt;</span> <span class="n">println</span><span class="o">(</span><span class="n">i</span><span class="o">.</span><span class="n">pack</span><span class="o">))</span>
<span class="o">}</span>
</code></pre></div>
<p>你会发现，这里我们可以使用一个抽象类型并且无需思考它们具体的类型直接调用<code>pack</code>方法即可。多态会注意打印正确的值。我们的输出会像下面这样：</p>
<div class="highlight"><pre><span></span><code>I&#39;m a fruit and I&#39;m packed in a bag. 
I&#39;m a drink and I&#39;m packed in a bottle.
</code></pre></div>
<blockquote>
<p>子类化多提通过<code>extends</code>关键字使用继承来表示。
</p>
</blockquote>
<h3 id="_8">参数式多态<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>函数式编程中的参数化多态即为我们上节中展示的泛型。泛型既是参数化多态，我们已经见过，它支持我们定义基于任何类型或给定类型的子集类型的方法和数据结构。而具体的类型则可以在后续的阶段指定。</p>
<blockquote>
<p>参数式多态使用类型参数表示。
</p>
</blockquote>
<h3 id="ad-hoc">专用(ad-hoc)多态<a class="headerlink" href="#ad-hoc" title="Permanent link">&para;</a></h3>
<p>专用多态类似于参数式多态；然而在这种情况下，参数的类型是很重要的，因为具体实现会依赖于这些参数。它会在编译时被分析，不像子类型多态是在运行时。这多少类似于函数重载。</p>
<p>我们在本章的前面部分看到过它的一个例子，我们创建了一个<code>Adder</code>特质可以对不同的类型求和。让我们一步一步定义一个更加精密的例子，期望这样有助于连接它是如何工作的。我们的目标是让<code>sum</code>方法可以对任何类别的类型(之前是数字类型)求和：</p>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">Adder</span><span class="o">[</span><span class="kt">T</span><span class="o">]{</span>
  <span class="k">def</span> <span class="n">sum</span><span class="o">(</span><span class="n">a</span><span class="k">:</span><span class="kt">T</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span><span class="kt">T</span><span class="o">)</span><span class="k">:</span> <span class="kt">T</span>
<span class="o">}</span>
</code></pre></div>
<p>下一步，我们创建一个使用<code>sum</code>方法的对象并向外界暴露：</p>
<div class="highlight"><pre><span></span><code><span class="k">object</span> <span class="nc">Adder</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">sum</span><span class="o">[</span><span class="kt">T:</span> <span class="kt">Adder</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">T</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span> <span class="kt">T</span><span class="o">)</span><span class="k">:</span> <span class="kt">T</span> <span class="o">=</span> 
    <span class="n">implicitly</span><span class="o">[</span><span class="kt">Adder</span><span class="o">[</span><span class="kt">T</span><span class="o">]].</span><span class="n">sum</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<p>我们看到的上面这段代码是 Scala 中的一些语法糖，<code>implicitly</code>表示拥有一个隐式转换可以将<code>T</code>转换为<code>Adder[T]</code>。现在我们可以编写如下程序：</p>
<div class="highlight"><pre><span></span><code><span class="k">object</span> <span class="nc">AdhocPolymorphismExample</span> <span class="k">extends</span> <span class="nc">App</span><span class="o">{</span>
  <span class="k">import</span> <span class="nn">Adder._</span>
  <span class="n">println</span><span class="o">(</span><span class="s">s&quot;The sum of 1 + 2 is </span><span class="si">${</span><span class="n">sum</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span><span class="si">}</span><span class="s">&quot;</span><span class="o">)</span>
  <span class="n">println</span><span class="o">(</span><span class="s">s&quot;The sum of abc + def is </span><span class="si">${</span><span class="n">sum</span><span class="o">(</span><span class="s">&quot;abc&quot;</span><span class="o">,</span> <span class="s">&quot;def&quot;</span><span class="o">)</span><span class="si">}</span><span class="s">&quot;</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<p>如果我们尝试编译运行这个程序，将会得到如下错误：</p>
<div class="highlight"><pre><span></span><code>Error:(15, 51) could not find implicit value for evidence parameter 
of type com.ivan.nikolov.polymorphism.Adder[Int]
    System.out.println(s&quot;The sum of 1 + 2 is ${sum(1, 2)}&quot;)
                                                  ^
Error:(16, 55) could not find implicit value for evidence parameter 
of type com.ivan.nikolov.polymorphism.Adder[String]
    System.out.println(s&quot;The sum of abc + def is ${sum(&quot;abc&quot;, &quot;def&quot;)}&quot;)
                                                      ^
</code></pre></div>
<p>这表示我们的代码不知道如何将整数或字符串隐式转换为<code>Adder[Int]</code>或<code>Adder[String]</code>。我们需要做的是定义这些转换以告诉程序<code>sum</code>方法该如何做。我们的<code>Adder</code>对象看起来会是这样：</p>
<div class="highlight"><pre><span></span><code><span class="k">object</span> <span class="nc">Adder</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">sum</span><span class="o">[</span><span class="kt">T:</span> <span class="kt">Adder</span><span class="o">](</span><span class="n">a</span><span class="k">:</span> <span class="kt">T</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span> <span class="kt">T</span><span class="o">)</span><span class="k">:</span> <span class="kt">T</span> <span class="o">=</span> <span class="n">implicitly</span><span class="o">[</span><span class="kt">Adder</span><span class="o">[</span><span class="kt">T</span><span class="o">]].</span><span class="n">sum</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span>

  <span class="k">implicit</span> <span class="k">val</span> <span class="n">int2Adder</span><span class="k">:</span><span class="kt">Adder</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Adder</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="o">{</span>
    <span class="k">override</span> <span class="k">def</span> <span class="n">sum</span><span class="o">(</span><span class="n">a</span><span class="k">:</span><span class="kt">Int</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span><span class="k">:</span><span class="kt">Int</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
  <span class="o">}</span>

  <span class="k">implicit</span> <span class="k">val</span> <span class="n">string2Adder</span><span class="k">:</span><span class="kt">Adder</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Adder</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="o">{</span>
    <span class="k">override</span> <span class="k">def</span> <span class="n">sum</span><span class="o">(</span><span class="n">a</span><span class="k">:</span><span class="kt">String</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span><span class="kt">String</span><span class="o">)</span><span class="k">:</span><span class="kt">Int</span> <span class="o">=</span> <span class="s">s&quot;</span><span class="si">$a</span><span class="s"> concatenated with </span><span class="si">$b</span><span class="s">&quot;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>现在如果允许上面的程序则会得到如下输出：</p>
<div class="highlight"><pre><span></span><code>The sum of 1 + 2 is 3
The sum of abc + def is abc concatenated with def
</code></pre></div>
<p>同样，如果你记得本章开头的例子，我们是不能对字符串求和的。现在你会发现，我们可以提供不同的实现，因为我们定义了一个转换为<code>Adder</code>方式，因此使用任何类型都是没有问题的。</p>
<p>专用泛型支持我们在不修改基类的基础上扩展代码。这在使用外部库时将会很有帮助，比如因为某些原因我们无法修改原始代码。它很强大而且在编译时求解，这可以确保我们的程序会和预期的一样运行。另外，它可以支持我们为无法访问的类型(比如这里的 Int、String)提供功能。</p>
<h4 id="_9">为多个类型提供功能<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<p>如果我们回头看本章的开头，我们为数字类型定义了一个<code>Adder</code>，会发现后面最终的实现会要求我们为不同的数字类型单独定义不同的操作，比如 Long、Double等等。有没有方式来实现本章开头的哪种效果呢？当然有，就像下面这样：</p>
<div class="highlight"><pre><span></span><code><span class="k">implicit</span> <span class="k">def</span> <span class="n">numeric2Adder</span><span class="o">[</span><span class="kt">T:</span> <span class="kt">Numeric</span><span class="o">]</span><span class="k">:</span><span class="kt">Adder</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Adder</span><span class="o">[</span><span class="kt">T</span><span class="o">]{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">sum</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">T</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span> <span class="kt">T</span><span class="o">)</span> <span class="o">=</span> <span class="n">implicitly</span><span class="o">[</span><span class="kt">Numeric</span><span class="o">[</span><span class="kt">T</span><span class="o">]].</span><span class="n">plus</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<p>我们仅仅定义了另一个隐式转换(将<code>Numeric[T]</code>转换为<code>Adder[T]</code>)，它会为我们处理好一切。现在可以像下面这样使用：</p>
<div class="highlight"><pre><span></span><code><span class="n">println</span><span class="o">(</span><span class="s">s&quot;The sum of 1.2 + 6.5 is </span><span class="si">${</span><span class="n">sum</span><span class="o">(</span><span class="mf">1.2</span><span class="o">,</span> <span class="mf">6.5</span><span class="o">)</span><span class="si">}</span><span class="s">&quot;</span><span class="o">)</span>
</code></pre></div>
<blockquote>
<p>专用多态通过**隐式混入行为**来表示。这是**类型类设计模式**的主要构建方式，后续章节中将会详细解释。</p>
<p>例子中，首先定义一个泛型接口，然后通过传入具体类型参数来创建不同类型的具体子类实例，从而调用支持不同类型的实例方法。只是这个过程是通过隐式转换完成的。</p>
</blockquote>
<h2 id="_10">自类型<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<p>好代码的其中一个特性是关注点分离。开发者需要致力于使类与其方法的职责仅有一个。这有助于测试和维护，而且更有助于简化代码的理解。记得，<em>简单的总是最好的</em>。</p>
<p>然而，在编写实际软件时总是无法避免，为了实现某些功能我们需要在一个类的实例中持有别的类的实例。换句话说，一旦我们的对构件块进行了清晰的分离，为了实现功能它们之间则会存在依赖。我们这里所讨论的总结起来实际上就是依赖注入。自类型提供了一种方法来以更加优雅的方式来处理这些依赖。本节中，我们将讨论它们的用法及优点。</p>
<h3 id="_11">使用自类型<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>自类型支持我们在应用中更简便的拆分代码，然后再在其他地方指定那些需要的部分。例子会让一切变得清晰，因此让我们看一个实例。假如我们想要往数据库持久化信息：</p>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">Persister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">persist</span><span class="o">(</span><span class="n">data</span><span class="k">:</span><span class="kt">T</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<p><code>persist</code>方法会对数据做一些转换并存储到我们的数据库。当然，我们的代码写的很好，因此数据库实现是互相分离的。我们拥有以下几种数据库：</p>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">Database</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">save</span><span class="o">(</span><span class="n">data</span><span class="k">:</span> <span class="kt">T</span><span class="o">)</span>
<span class="o">}</span>

<span class="k">trait</span> <span class="nc">MemoryDatabase</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">Database</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">db</span><span class="k">:</span><span class="kt">mutable.MutableList</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">=</span> <span class="n">mutable</span><span class="o">.</span><span class="nc">MutableList</span><span class="o">.</span><span class="n">empty</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">save</span><span class="o">(</span><span class="n">data</span><span class="k">:</span><span class="kt">T</span><span class="o">)</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Saving to in memory database.&quot;</span><span class="o">)</span>
    <span class="n">db</span><span class="o">.+=:(</span><span class="n">data</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="k">trait</span> <span class="nc">FileDatabase</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">Database</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">=</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">save</span><span class="o">(</span><span class="n">data</span><span class="k">:</span><span class="kt">T</span><span class="o">)</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Saving to file.&quot;</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>我们拥有一个特质及一些具体的数据库实现。那么如何把数据库传递给<code>Persister</code>呢？它应该能够调用数据库中的<code>save</code>方法。可能会有以下几种方式：</p>
<ul>
<li>在<code>Persister</code>中扩展<code>Database</code>。这样虽然可行，但是会让<code>Persister</code>也变成了<code>Database</code>的实例，我们并不希望这样。后面会解释原因。</li>
<li>在<code>Persister</code>中拥有一个<code>Database</code>变量，然后使用它。</li>
<li>使用自类型。</li>
</ul>
<p>为了能够观察自类型是如何工作的，因此使用自类型的方式。我们的<code>Persister</code>接口将会变成下面这样：</p>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">Persister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span> <span class="k">this:</span> <span class="kt">Database</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">=&gt;</span>
  <span class="k">def</span> <span class="n">persist</span><span class="o">(</span><span class="n">data</span><span class="k">:</span><span class="kt">T</span><span class="o">)</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Calling persist.&quot;</span><span class="o">)</span> 
    <span class="n">save</span><span class="o">(</span><span class="n">data</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>现在我们访问了数据库中的方法并在<code>Persister</code>之内调用了<code>save</code>方法。</p>
<blockquote>
<p><strong>为自类型命名</strong></p>
<p>在上面的代码中，我们使用<code>this: Database[T] =&gt;</code>语句将自类型包括进来。这样支持我们像使用自身的方法一样直接使用被引入类型的方法。另一种替代的方式是使用<code>self: Database[T] =&gt;</code>。有很多例子中使用了后面的方式，这样可以避免当我们需要在嵌套的特质或类定义中使用<code>this</code>而引起的混乱。然而这种方式需要在调用被注入的方法时使用<code>self</code>来引用。</p>
</blockquote>
<p>自类型会要求任何混入<code>Persister</code>类同时混入<code>Database</code>，否则编译将会失败。让我们创建一些持久化到内存和数据库的类：</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FilePersister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">Persister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">FileDatabase</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span>
<span class="k">class</span> <span class="nc">MemoryPersister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">Persister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">MemoryDatabase</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span>
</code></pre></div>
<p>最终，我们可以在应用中使用它们：</p>
<div class="highlight"><pre><span></span><code><span class="k">object</span> <span class="nc">PersisterExample</span> <span class="k">extends</span> <span class="nc">App</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">fileStringPersister</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FilePersister</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
  <span class="k">val</span> <span class="n">memoryIntPersister</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MemoryPersister</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>

  <span class="n">fileStringPersister</span><span class="o">.</span><span class="n">persist</span><span class="o">(</span><span class="s">&quot;something&quot;</span><span class="o">)</span>
  <span class="n">fileStringPersister</span><span class="o">.</span><span class="n">persist</span><span class="o">(</span><span class="s">&quot;something else&quot;</span><span class="o">)</span>

  <span class="n">memoryIntPersister</span><span class="o">.</span><span class="n">persist</span><span class="o">(</span><span class="mi">100</span><span class="o">)</span>
  <span class="n">memoryIntPersister</span><span class="o">.</span><span class="n">persist</span><span class="o">(</span><span class="mi">123</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<p>自类型与继承所做的事是不同的，它需要一些代码的存在，因此也能支持我们对功能进行很好的拆分。这可以很大的改变的对程序的维护、重构和理解。</p>
<h4 id="_12">使用多个组件<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<p>在真实的应用中，可能需要使用自类型来对多个组件做出要求。让我们在例子中展示一个<code>Histoty</code>特质，它能够追踪改变并回滚到某个点。不过这里仅做一些打印：</p>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">History</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">add</span><span class="o">()</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Action added to history.&quot;</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>我们需要在<code>Persister</code>中使用它，看起来像是这样：</p>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">Persister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span> <span class="k">this:</span> <span class="kt">Database</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">History</span> <span class="o">=&gt;</span>
  <span class="k">def</span> <span class="n">persist</span><span class="o">(</span><span class="n">data</span><span class="k">:</span><span class="kt">T</span><span class="o">)</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Calling persist.&quot;</span><span class="o">)</span>
    <span class="n">save</span><span class="o">(</span><span class="n">data</span><span class="o">)</span>
    <span class="n">add</span><span class="o">()</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>我们可以通过<code>with</code>关键字同时添加多个需求。然而，如果我们仅让代码做出这些改变，它并不会编译成功。原因是现在我们必须同时混入<code>History</code>到<code>Persister</code>中：</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FilePersister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">Persister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">FileDatabase</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">History</span>
<span class="k">class</span> <span class="nc">MemoryPersister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">Persister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">MemoryDatabase</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">History</span>
</code></pre></div>
<p>然后再次运行代码，将会得到如下输出：</p>
<div class="highlight"><pre><span></span><code>Calling persist.
Saving to file.
Action added to history. Calling persist.
Saving to file.
Action added to history. Calling persist.
Saving to in memory database. Action added to history. Calling persist.
Saving to in memory database. Action added to history.
</code></pre></div>
<h4 id="_13">组件冲突<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>在上面的例子中，我们拥有一个对<code>History</code>特质的需要，它拥有一个<code>add</code>方法。如果不同组件中的方法拥有相同的签名会怎样呢？让我们试一下：</p>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">Mystery</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">add</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Mystery added!&quot;</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>然后使用到<code>Persister</code>中：</p>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">Persister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span> <span class="k">this:</span><span class="kt">Database</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">History</span> <span class="k">with</span> <span class="nc">Mystery</span> <span class="o">=&gt;</span>
  <span class="k">def</span> <span class="n">persist</span><span class="o">(</span><span class="n">data</span><span class="k">:</span><span class="kt">T</span><span class="o">)</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Calling persist.&quot;</span><span class="o">)</span>
    <span class="n">save</span><span class="o">(</span><span class="n">data</span><span class="o">)</span>
    <span class="n">add</span><span class="o">()</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="k">class</span> <span class="nc">FilePersister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">Persister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">FileDatabase</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">History</span> <span class="k">with</span> <span class="nc">Mystery</span> 
<span class="k">class</span> <span class="nc">MemoryPersister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">Persister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">MemoryDatabase</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">History</span> <span class="k">with</span> <span class="nc">Mystery</span>
</code></pre></div>
<p>如果我们允许这个应用，将会得到如下错误信息：</p>
<div class="highlight"><pre><span></span><code>Error:(47, 7) class FilePersister inherits conflicting members:
    method add in trait History of type ()Unit and
    method add in trait Mystery of type ()Unit
(Note: this can be resolved by declaring an override in class FilePersister.)
class FilePersister[T] extends Persister[T] with FileDatabase[T] with History with Mystery
^
Error:(48, 7) class MemoryPersister inherits conflicting members:
    method add in trait History of type ()Unit and
    method add in trait Mystery of type ()Unit
(Note: this can be resolved by declaring an override in class MemoryPersister.)class MemoryPersister[T] extends Persister[T] with MemoryDatabase[T] with History with Mystery
                               ^
</code></pre></div>
<p>幸运的是这个错误消息已经包含了一些如何修复问题的信息。这跟我们一开始使用特质时遇到的完全是相同的问题，我们可以使用如下的方式修复：</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FilePersister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">Persister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">FileDatabase</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">History</span> <span class="k">with</span> <span class="nc">Mystery</span><span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">add</span><span class="o">()</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="k">super</span><span class="o">[</span><span class="kt">History</span><span class="o">].</span><span class="n">add</span><span class="o">()</span>
<span class="o">}</span>
<span class="k">class</span> <span class="nc">MemoryPersister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">extends</span> <span class="nc">Persister</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">MemoryDatabase</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">with</span> <span class="nc">History</span> <span class="k">with</span> <span class="nc">Mystery</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">add</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="k">super</span><span class="o">[</span><span class="kt">Mystery</span><span class="o">].</span><span class="n">add</span><span class="o">()</span>
<span class="o">}</span>
</code></pre></div>
<p>然后再次运行例子，将会得到预期的输出：</p>
<div class="highlight"><pre><span></span><code>Calling persist.
Saving to file.
Action added to history. Calling persist.
Saving to file.
Action added to history. Calling persist.
Saving to in memory database. Mystery added!
Calling persist.
Saving to in memory database. Mystery added!
</code></pre></div>
<h4 id="_14">自类型与蛋糕模式<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<p>上面我们看到的例子都是单纯的依赖注入的例子。我们通过自类型要要求一个组件必须引入一些指定的组件。</p>
<blockquote>
<p>自类型常用于依赖注入。他们是*蛋糕设计模式*的主要部分，本书后续部分我们将详细介绍。</p>
</blockquote>
<p>蛋糕模式的实现完全依赖于自类型。它鼓励工程师编写小而简单的组件，然后声明并使用它们的依赖。当应用中所有的组件都编写完成后，可以在一个通用的组件中实例化它们以应用于实际的应用。蛋糕模式的一个好的优势是实际上会在编译时来检查所有的依赖是否都满足了。</p>
<p>在本书的后续部分，我们将使用一整个小节来讨论蛋糕模式，那里我们将讨论更多关于该模式是如何被连接在一起的细节，它的优势及缺陷，等等。</p>
<h3 id="_15">自类型与继承对比<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>在上一节中，我们讲到不希望使用继承的方式来访问<code>Database</code>的方法。这又是为何呢？如果我们让<code>Persister</code>扩展<code>Database</code>，这意味着<code>Persister</code>本省也变成了一个<code>Database</code>(is-a 关系)。然而这是不正确的。这里它只是*使用*一个数据库来实现其功能，而不能称为一个数据库。</p>
<p>继承将子类暴露给父级的实现细节。然而并非总是期望得到这样的结果。根据*Design Patterns: Elements of Reusable Object-Oriented Software*一书的作者所提倡的，开发者总是应该优先使用组合，而不是继承。</p>
<h4 id="_16">继承泄露了功能<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h4>
<p>如果我们使用了继承，同样会将我们不希望的功能泄露给子类。让我们看一下下面的代码：</p>
<div class="highlight"><pre><span></span><code><span class="k">trait</span> <span class="nc">DB</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">connect</span><span class="o">()</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="n">println</span><span class="o">(</span><span class="s">&quot;Connected.&quot;</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">dropDatabase</span><span class="o">()</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="n">println</span><span class="o">(</span><span class="s">&quot;Dropping!&quot;</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">close</span><span class="o">()</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="n">println</span><span class="o">(</span><span class="s">&quot;Closed.&quot;</span><span class="o">)</span>
<span class="o">}</span>
<span class="k">trait</span> <span class="nc">UserDB</span> <span class="k">extends</span> <span class="nc">DB</span><span class="o">{</span>
  <span class="k">def</span> <span class="n">createUser</span><span class="o">(</span><span class="n">username</span><span class="k">:</span><span class="kt">String</span><span class="o">)</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">connect</span><span class="o">()</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">println</span><span class="o">(</span><span class="s">s&quot;Creating a user: </span><span class="si">$username</span><span class="s">&quot;</span><span class="o">)</span>
    <span class="o">}</span> <span class="k">finally</span><span class="o">{</span>
      <span class="n">close</span><span class="o">()</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="k">def</span> <span class="n">getUser</span><span class="o">(</span><span class="n">username</span><span class="k">:</span><span class="kt">String</span><span class="o">)</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">connect</span><span class="o">()</span>
    <span class="k">try</span><span class="o">{</span>
      <span class="n">println</span><span class="o">(</span><span class="s">s&quot;Getting a user: </span><span class="si">$username</span><span class="s">&quot;</span><span class="o">)</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">close</span><span class="o">()</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="k">trait</span> <span class="nc">UserService</span> <span class="k">extends</span> <span class="nc">UserDB</span><span class="o">{</span>
  <span class="k">def</span> <span class="n">bad</span><span class="o">()</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="n">dropDatabase</span><span class="o">()</span>
<span class="o">}</span>
</code></pre></div>
<p>这会是一个真实的情况。因为这就是继承的工作方式，我们可以在<code>UserService</code>中访问<code>dropDatabase</code>。这是一些我们不希望发生的事情，而且可以通过自类型来修复。特质<code>DB</code>不需要变动，仅需要修改以下内容：</p>
<div class="highlight"><pre><span></span><code><span class="n">trair</span> <span class="nc">UserDB</span><span class="o">{</span> <span class="k">this:</span><span class="kt">DB</span> <span class="o">=&gt;</span>
  <span class="k">def</span> <span class="n">createUser</span><span class="o">(</span><span class="n">username</span><span class="k">:</span><span class="kt">String</span><span class="o">)</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">connect</span><span class="o">()</span>
    <span class="k">try</span><span class="o">{</span>
      <span class="n">println</span><span class="o">(</span><span class="s">s&quot;Creating a user: </span><span class="si">$username</span><span class="s">&quot;</span><span class="o">)</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="n">close</span><span class="o">()</span>
  <span class="o">}</span>
  <span class="k">def</span> <span class="n">getUser</span><span class="o">(</span><span class="n">username</span><span class="k">:</span><span class="kt">String</span><span class="o">)</span><span class="k">:</span><span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">connect</span><span class="o">()</span>
    <span class="k">try</span><span class="o">{</span>
      <span class="n">println</span><span class="o">(</span><span class="s">s&quot;Getting a user: </span><span class="si">$username</span><span class="s">&quot;</span><span class="o">)</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="n">close</span><span class="o">()</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="k">trait</span> <span class="nc">UserService</span><span class="o">{</span> <span class="k">this:</span> <span class="kt">UserDB</span> <span class="o">=&gt;</span>
  <span class="c1">//...</span>
<span class="o">}</span>
</code></pre></div>
<p>这样，在<code>UserService</code>中就无法再访问到<code>dropDatabase</code>了。我们只能调用我们需要的方法，这也就是我们要真正实现的。</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../CH03-%E7%BB%9F%E4%B8%80%E5%8C%96/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              CH03-统一化
            </div>
          </div>
        </a>
      
      
        <a href="../CH05-AOP%20%E4%B8%8E%E7%BB%84%E4%BB%B6/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              CH05-AOP 与组件
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2013 - 2021 Infilos
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://twitter.com/squidfunk" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://github.com/infilow/relax-authentic" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight"], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
  
      <script src="../../assets/javascripts/bundle.4ea5477f.min.js"></script>
      
    
  <script src="../../assets/javascripts/bundle.3b3ca511.min.js"></script>

  </body>
</html>