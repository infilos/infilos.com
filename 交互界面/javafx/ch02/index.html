<!doctype html><html lang=zh class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.93.3">
<meta name=ROBOTS content="INDEX, FOLLOW">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192>
<title>JavaFX Property | infilos.com</title><meta property="og:title" content="JavaFX Property">
<meta property="og:description" content="JavaFX Properties and Binding – A Complete Guide
 使用 JavaFX 的好处之一是它对 Property 和 Binding 的强大而全面的支持。除此之外，Property 还允许你连接场景，这样当你修改它后面的数据时，视图就会自动更新。
属性是可写或只读的可观察对象。在 JavaFX 中有 30 种类型的 Property 对象，包括 StringProperty、SimpleListProperty 和 ReadOnlyObjectProperty。每个属性都包装了一个现有的 Java 对象，添加了监听和绑定的功能。
 以 SimpleDoubleProperty 为例，它集成了 JavaFX 中 binding、property 和 value 的各种重要的 package，每个 package 都增加了JavaFX 属性所展示的最终功能的一个方面。
除了属性功能之外，JavaFX 还通过 Binding 和 Expression 对象提供绑定值的功能。
Binding 是一种强制对象之间关系的机制，其中一个或多个可观察对象被用来更新另一个对象的值。Binding 可以是一个方向，也可以是两个方向，可以直接从属性(Fluent API)或使用 Bindings 实用程序类(Bindings API)创建。
如果需要额外的自定义或性能，也可以手动创建自定义绑定对象。这被称为低级 API。
主要内容 Property 和 Binding 是一组接口和类，旨在大大简化开发人员的工作。也就是说，在 Bindings 类中有 61个 属性和 249 个方法，因此很难管理。">
<meta property="og:type" content="article">
<meta property="og:url" content="/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch02/"><meta property="article:section" content="交互界面">
<meta property="og:site_name" content="infilos.com">
<meta itemprop=name content="JavaFX Property">
<meta itemprop=description content="JavaFX Properties and Binding – A Complete Guide
 使用 JavaFX 的好处之一是它对 Property 和 Binding 的强大而全面的支持。除此之外，Property 还允许你连接场景，这样当你修改它后面的数据时，视图就会自动更新。
属性是可写或只读的可观察对象。在 JavaFX 中有 30 种类型的 Property 对象，包括 StringProperty、SimpleListProperty 和 ReadOnlyObjectProperty。每个属性都包装了一个现有的 Java 对象，添加了监听和绑定的功能。
 以 SimpleDoubleProperty 为例，它集成了 JavaFX 中 binding、property 和 value 的各种重要的 package，每个 package 都增加了JavaFX 属性所展示的最终功能的一个方面。
除了属性功能之外，JavaFX 还通过 Binding 和 Expression 对象提供绑定值的功能。
Binding 是一种强制对象之间关系的机制，其中一个或多个可观察对象被用来更新另一个对象的值。Binding 可以是一个方向，也可以是两个方向，可以直接从属性(Fluent API)或使用 Bindings 实用程序类(Bindings API)创建。
如果需要额外的自定义或性能，也可以手动创建自定义绑定对象。这被称为低级 API。
主要内容 Property 和 Binding 是一组接口和类，旨在大大简化开发人员的工作。也就是说，在 Bindings 类中有 61个 属性和 249 个方法，因此很难管理。">
<meta itemprop=wordCount content="1124">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content="JavaFX Property">
<meta name=twitter:description content="JavaFX Properties and Binding – A Complete Guide
 使用 JavaFX 的好处之一是它对 Property 和 Binding 的强大而全面的支持。除此之外，Property 还允许你连接场景，这样当你修改它后面的数据时，视图就会自动更新。
属性是可写或只读的可观察对象。在 JavaFX 中有 30 种类型的 Property 对象，包括 StringProperty、SimpleListProperty 和 ReadOnlyObjectProperty。每个属性都包装了一个现有的 Java 对象，添加了监听和绑定的功能。
 以 SimpleDoubleProperty 为例，它集成了 JavaFX 中 binding、property 和 value 的各种重要的 package，每个 package 都增加了JavaFX 属性所展示的最终功能的一个方面。
除了属性功能之外，JavaFX 还通过 Binding 和 Expression 对象提供绑定值的功能。
Binding 是一种强制对象之间关系的机制，其中一个或多个可观察对象被用来更新另一个对象的值。Binding 可以是一个方向，也可以是两个方向，可以直接从属性(Fluent API)或使用 Bindings 实用程序类(Bindings API)创建。
如果需要额外的自定义或性能，也可以手动创建自定义绑定对象。这被称为低级 API。
主要内容 Property 和 Binding 是一组接口和类，旨在大大简化开发人员的工作。也就是说，在 Bindings 类中有 61个 属性和 249 个方法，因此很难管理。">
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-123062585-1","auto"),ga("send","pageview"))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<link rel=preload href=/scss/main.min.847464b684a6e89d7276700a5c500c17ab494dd1755b2654a7b27d8b59e3347e.css as=style>
<link href=/scss/main.min.847464b684a6e89d7276700a5c500c17ab494dd1755b2654a7b27d8b59e3347e.css rel=stylesheet integrity>
<script src=/js/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
</head><body class=td-page>
<header>
<nav class="js-navbar-scroll navbar navbar-expand-lg navbar-dark td-navbar">
<a class=navbar-brand href=/>
<span class=navbar-logo><svg id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512"><path style="fill:#ffc107" d="M432.384 143.616c-4.165-4.164-10.917-4.164-15.083.0l-60.352 60.352c-4.164 4.165-4.164 10.917.0 15.083 21.187 20.463 54.951 19.876 75.413-1.311 19.962-20.668 19.962-53.435.0-74.102L432.384 143.616z"/><path style="fill:#607d8b" d="M42.667 277.334c-5.891.003-10.669-4.771-10.672-10.662-.002-4.338 2.623-8.245 6.64-9.882l234.667-96c5.455-2.233 11.687.38 13.92 5.835s-.38 11.687-5.835 13.92l-234.667 96C45.433 277.069 44.056 277.337 42.667 277.334z"/><path style="fill:#546e7a" d="M391.552 56.448l-32-32C343.938 8.745 322.689-.059 300.544.0h-3.755c-46.082.024-83.432 37.374-83.456 83.456v3.755c-.053 22.138 8.75 43.377 24.448 58.987l32 32c4.165 4.164 10.917 4.164 15.083.0L391.531 71.531C395.701 67.372 395.71 60.62 391.552 56.448z"/><path style="fill:#607d8b" d="M160 469.334c-3.279.006-6.379-1.497-8.405-4.075L34.261 315.926c-3.635-4.636-2.823-11.341 1.813-14.976s11.341-2.823 14.976 1.813l117.333 149.333c3.629 4.641 2.809 11.344-1.832 14.973C164.681 468.533 162.375 469.329 160 469.334z"/><path style="fill:#455a64" d="M487.467 86.848l-3.669-3.648c-37.687-36.557-97.71-36.197-134.955.811l-51.413 51.413c-36.996 37.25-37.357 97.263-.811 134.955l3.584 3.669c1.7 2.457 4.671 3.706 7.616 3.2 2.831.005 5.548-1.115 7.552-3.115l172.181-172.181c4.189-4.143 4.226-10.896.083-15.085-.028-.028-.055-.056-.083-.083L487.467 86.848z"/><g><path style="fill:#ffc107" d="M501.333 192H480c-5.891.0-10.667-4.776-10.667-10.667s4.776-10.667 10.667-10.667h21.333c5.891.0 10.667 4.776 10.667 10.667S507.225 192 501.333 192z"/><path style="fill:#ffc107" d="M394.667 298.667c-5.891.0-10.667-4.776-10.667-10.667v-21.333c0-5.891 4.776-10.667 10.667-10.667 5.891.0 10.667 4.776 10.667 10.667V288C405.333 293.891 400.558 298.667 394.667 298.667z"/><path style="fill:#ffc107" d="M480 277.334c-2.831.005-5.548-1.115-7.552-3.115l-21.333-21.333c-4.093-4.237-3.975-10.99.262-15.083 4.134-3.993 10.687-3.993 14.821.0l21.333 21.333c4.159 4.172 4.148 10.926-.024 15.085C485.514 276.209 482.815 277.327 480 277.334z"/></g><g><path style="fill:#455a64" d="M266.667 448H96c-29.455.0-53.333 23.878-53.333 53.333.0 5.891 4.776 10.667 10.667 10.667h256c5.891.0 10.667-4.776 10.667-10.667C320 471.878 296.122 448 266.667 448z"/><circle style="fill:#455a64" cx="32" cy="288" r="32"/></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg></span>
<span class=font-weight-bold>infilos.com</span>
</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav mr-auto">
<li class=nav-item style=max-width:90px;min-width:10px>
<a class=nav-link href=/%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86>
<span>基础</span>
</a>
</li><li class=nav-item style=max-width:90px;min-width:10px>
<a class=nav-link href=/%e7%bc%96%e7%a8%8b%e8%af%ad%e8%a8%80>
<span>语言</span>
</a>
</li><li class=nav-item style=max-width:90px;min-width:10px>
<a class=nav-link href=/%e6%a1%86%e6%9e%b6%e4%b8%8e%e5%ba%93>
<span>框架库</span>
</a>
</li><li class="nav-item dropdown" style=max-width:90px;min-width:10px>
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
分布式
<span>+</span>
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdown>
<a class=dropdown-item href=/%e5%88%86%e5%b8%83%e5%bc%8f/base>基本构成</a>
</div></li><li class="nav-item dropdown" style=max-width:90px;min-width:10px>
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
大数据
<span>+</span>
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdown>
<a class=dropdown-item href=/%e5%ad%98%e5%82%a8%e7%b3%bb%e7%bb%9f>存储系统</a>
<a class=dropdown-item href=/%e6%9f%a5%e8%af%a2%e7%b3%bb%e7%bb%9f>查询系统</a>
<a class=dropdown-item href=/%e6%b6%88%e6%81%af%e7%b3%bb%e7%bb%9f>消息系统</a>
<a class=dropdown-item href=/%e5%a4%84%e7%90%86%e7%b3%bb%e7%bb%9f>处理系统</a>
<a class=dropdown-item href=/%e6%95%b0%e6%8d%ae%e6%b2%bb%e7%90%86>数据治理</a>
</div></li><li class="nav-item dropdown" style=max-width:90px;min-width:10px>
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
中后台
<span>+</span>
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdown>
<a class=dropdown-item href=/%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd>基础设施</a>
<a class=dropdown-item href=/%e7%94%a8%e6%88%b7%e7%b3%bb%e7%bb%9f>用户系统</a>
<a class=dropdown-item href=/%e4%ba%a4%e4%ba%92%e7%95%8c%e9%9d%a2>交互界面</a>
<a class=dropdown-item href=/%e4%b8%9a%e5%8a%a1%e7%b3%bb%e7%bb%9f>业务系统</a>
</div></li><li class=nav-item style=max-width:90px;min-width:10px>
<a class=nav-link href=/%e6%a8%a1%e5%bc%8f%e6%9e%b6%e6%9e%84>
<span>模式架构</span>
</a>
</li><li class=nav-item style=max-width:90px;min-width:10px>
<a class=nav-link href=/%e9%9d%a2%e8%af%95%e9%97%ae%e7%ad%94>
<span>面试</span>
</a>
</li><li class=nav-item style=max-width:90px;min-width:10px>
<a class=nav-link href=/%e7%ae%a1%e7%90%86%e8%b7%af%e5%be%84>
<span>管理</span>
</a>
</li><li class=nav-item style=max-width:90px;min-width:10px>
<a class=nav-link href=/%e5%bc%80%e6%ba%90%e9%a1%b9%e7%9b%ae>
<span>开源</span>
</a>
</li></ul><div class="form-inline my-2 my-lg-0">
<div class="nav-item nav-search-item my-2 my-md-0">
<input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off>
</div></div></div></nav></header><div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
<div id=td-sidebar-menu class=td-sidebar__inner>
<div id=content-mobile>
<form class="td-sidebar__search d-flex align-items-center">
<input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation">
</button>
</form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav>
<ul class="td-sidebar-nav__section pr-md-3 ul-0">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-e4baa4e4ba92e7958ce99da2-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-e4baa4e4ba92e7958ce99da2><span>交互界面</span></a>
<ul class=ul-1>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-e4baa4e4ba92e7958ce99da2javafx-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-e4baa4e4ba92e7958ce99da2javafx><span>JavaFX</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch01-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch01/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch01><span>JavaFX Layouts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-e4baa4e4ba92e7958ce99da2javafxch02-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch02/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch02><span class=td-sidebar-nav-active-item>JavaFX Property</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch03-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch03/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch03><span>JavaFX Style</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch04-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch04/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch04><span>JavaFX Controls</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch05-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch05/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch05><span>JavaFX Responsive</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch06-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch06/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch06><span>JavaFX TextEditor</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch07-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch07/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch07><span>JavaFX Background Task</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch08-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch08/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch08><span>JavaFX Animation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch09-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch09/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch09><span>JavaFX Events</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch10-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch10/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch10><span>JavaFX Refresh Scene</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch11-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch11/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch11><span>JavaFX TableView</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch12-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch12/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch12><span>JavaFX REST</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch13-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch13/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch13><span>JavaFX New Window</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch14-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch14/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch14><span>JavaFX Button Events</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch15-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch15/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch15><span>JavaFX Canvas Vs Pane</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch16-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch16/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch16><span>JavaFX GridPane Nodes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch17-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch17/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch17><span>JavaFX Triangles</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch18-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch18/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch18><span>JavaFX Canvas</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch19-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch19/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch19><span>JavaFX Charts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch20-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch20/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch20><span>JavaFX Drag Shapes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch21-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch21/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch21><span>JavaFX TableView Filter</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch22-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch22/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch22><span>JavaFX TableView Style</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch23-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch23/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch23><span>JavaFX TableView SVG</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-e4baa4e4ba92e7958ce99da2javafxch24-li>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch24/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-e4baa4e4ba92e7958ce99da2javafxch24><span>JavaFX All Buttons</span></a>
</li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href=https://github.com/infilos/infilos.com/edit/master/content/zh/%e4%ba%a4%e4%ba%92%e7%95%8c%e9%9d%a2/javafx/CH02.md target=_blank><i class="fa fa-edit fa-fw"></i> 编辑此页</a>
<a href="https://github.com/infilos/infilos.com/new/master/content/zh/%e4%ba%a4%e4%ba%92%e7%95%8c%e9%9d%a2/javafx/CH02.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> 添加子页面</a>
<a href="https://github.com/infilos/infilos.com/issues/new?title=JavaFX%20Property" target=_blank><i class="fab fa-github fa-fw"></i> 提交文档问题</a>
<a id=print href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/_print/><i class="fa fa-print fa-fw"></i> 整节打印</a>
</div><div class=td-toc><nav id=TableOfContents>
<ul>
<li><a href=#主要内容>主要内容</a></li><li><a href=#什么是-property>什么是 Property</a>
<ul>
<li><a href=#创建-property>创建 Property</a></li><li><a href=#如何观察属性>如何观察属性</a></li><li><a href=#监听更改>监听更改</a></li></ul></li><li><a href=#什么是-binding>什么是 Binding</a>
<ul>
<li><a href=#如何绑定属性>如何绑定属性</a></li><li><a href=#单向绑定>单向绑定</a></li><li><a href=#双向绑定>双向绑定</a></li></ul></li><li><a href=#中间绑定技术>中间绑定技术</a>
<ul>
<li><a href=#fluent-api>Fluent API</a></li><li><a href=#bindings-api>Bindings API</a></li><li><a href=#values>Values</a></li><li><a href=#collections>Collections</a></li><li><a href=#other-bindings>Other bindings</a></li><li><a href=#操作值>操作值</a></li><li><a href=#操作集合>操作集合</a></li><li><a href=#创建绑定对象>创建绑定对象</a></li></ul></li><li><a href=#高阶绑定低级-api-binding>高阶绑定——低级 API Binding</a>
<ul>
<li><a href=#什么是低级-api>什么是低级 API</a></li><li><a href=#创建低级-binding>创建低级 Binding</a></li><li><a href=#给低级-api-添加功能>给低级 API 添加功能</a></li><li><a href=#重写-dispose>重写 <code>dispose()</code></a></li></ul></li><li><a href=#总结>总结</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<nav aria-label=breadcrumb class="d-none d-md-block d-print-none">
<ol class="breadcrumb spb-1">
<li class=breadcrumb-item>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/>交互界面</a>
</li><li class=breadcrumb-item>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/>JavaFX</a>
</li><li class="breadcrumb-item active" aria-current=page>
<a href=/%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2/javafx/ch02/>JavaFX Property</a>
</li></ol></nav><div class=td-content>
<h1>JavaFX Property</h1><header class=article-meta>
</header><div class="pageinfo pageinfo-primary">
<p><a href=https://edencoding.com/javafx-properties-and-binding-a-complete-guide/#advanced>JavaFX Properties and Binding – A Complete Guide</a></p></div><p>使用 JavaFX 的好处之一是它对 Property 和 Binding 的强大而全面的支持。除此之外，Property 还允许你连接场景，这样当你修改它后面的数据时，视图就会自动更新。</p><p>属性是可写或只读的可观察对象。在 JavaFX 中有 30 种类型的 Property 对象，包括 StringProperty、SimpleListProperty 和 ReadOnlyObjectProperty。每个属性都包装了一个现有的 Java 对象，添加了监听和绑定的功能。</p><div align=center> <img src=https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20220110230824.png style=display:block;width:80% alt=20220110230824 align=center> </div><p>以 <code>SimpleDoubleProperty</code> 为例，它集成了 JavaFX 中 binding、property 和 value 的各种重要的 package，每个 package 都增加了JavaFX 属性所展示的最终功能的一个方面。</p><p>除了属性功能之外，JavaFX 还通过 Binding 和 Expression 对象提供绑定值的功能。</p><p>Binding 是一种强制对象之间关系的机制，其中一个或多个可观察对象被用来更新另一个对象的值。Binding 可以是一个方向，也可以是两个方向，可以直接从属性(Fluent API)或使用 Bindings 实用程序类(Bindings API)创建。</p><p>如果需要额外的自定义或性能，也可以手动创建自定义绑定对象。这被称为低级 API。</p><h2 id=主要内容>主要内容</h2><p>Property 和 Binding 是一组接口和类，旨在大大简化开发人员的工作。也就是说，在 Bindings 类中有 61个 属性和 249 个方法，因此很难管理。</p><p>本文将介绍：</p><ul>
<li>什么是属性，哪些属性是可用的</li><li>如何观察一个属性值</li><li>什么是约束?</li><li>如何绑定属性</li><li>中间绑定技术(Fluent API 和 Bindings API)</li><li>高阶绑定技术(低级 API)</li></ul><p>JavaFX 早期的许多问题，比如当你改变某些东西时，场景不能自动更新，这是因为场景与属性的错误连接。JavaFX 场景旨在基于属性和事件进行更新。</p><p>如果您想加深对 JavaFX 如何工作的理解，也可以查看关于<a href=https://edencoding.com/javafx-events/>事件的全面指南</a>。这两篇文章结合起来将为 JavaFX 的后台工作提供一个真正坚实的基础。</p><h2 id=什么是-property>什么是 Property</h2><p>如果你像我一样，并且没有计算机科学背景，那么属性一开始似乎很吓人。不过，引擎盖下面并没有什么魔法。大多数 JavaFX Property 对象扩展了两个关键接口：<code>ReadOnlyProperty&lt;T></code> 和 <code>WriteableValue&lt;T></code>。</p><div align=center> <img src=https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20220110231507.png style=display:block;width:80% alt=20220110231507 align=center> </div><p>Some of them don’t, though. JavaFX has 10 read-only properties, which extend <code>ReadOnlyProperty&lt;T></code>, but don’t extend <code>WriteableValue&lt;T></code>.</p><p>JavaFX 有 10 个只读属性，扩展了 <code>ReadOnlyProperty&lt;T></code>，但没有扩展 <code>WriteableValue&lt;T></code>。</p><h3 id=创建-property>创建 Property</h3><p>JavaFX 提供了十个内置类，使创建属性变得非常容易。它们实现了所有必需的功能，从监听到绑定。</p><ul>
<li>SimpleBooleanProperty</li><li>SimpleDoubleProperty</li><li>SimpleFloatProperty</li><li>SimpleIntegerProperty</li><li>SimpleListProperty</li><li>SimpleLongProperty</li><li>SimpleMapProperty</li><li>SimpleObjectProperty</li><li>SimpleSetProperty</li><li>SimpleStringProperty</li></ul><p>您可以定义任何简单的属性对象，可以带有或不带初始值。如果没有定义默认值，它们将默认为属性包装对象的默认值——0、false、 空字符串("")或一个空集合。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>SimpleIntegerProperty</span><span style=color:#ce5c00;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>SimpleIntegerProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>initialValue</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>它们也可以用一个名称和一个 JavaFX 称为属性“bean”的对象来创建。这并没有以任何方式封装属性，而是创建了一个符号链接到表示属性“所有者”的对象。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>SimpleIntegerProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Object</span> <span style=color:#000>bean</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>String</span> <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>SimpleIntegerProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Object</span> <span style=color:#000>bean</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>String</span> <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>initialValue</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>参数 name 和 bean 都不会改变属性的行为，但它可以作为有用的查找方式。如果您将相同的侦听器附加到多个属性(特别是通过编程生成的属性)，那么这很有用。然后，一旦发生更改，您可以使用 bean 和 name 参数来检查刚刚更改的属性。</p><p>所有的 JavaFX 属性都有方法来实现以下功能：</p><ul>
<li>侦听对属性值的更改</li><li>将属性捆绑在一起(绑定)，以便它们自动更新</li><li>获取和设置(如果可写)属性值</li></ul><h3 id=如何观察属性>如何观察属性</h3><p>正如我们刚才从上面看到的，JavaFX Property 对象是不同实现接口的大杂烩。这在这里很重要，因为这意味着它们提供了两种侦听更改的方式：失效和更改。</p><div align=center> <img src=https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20220110233407.png style=display:block;width:80% alt=20220110233407 align=center> </div><p><strong>失效侦听器</strong>：JavaFX 中的每个属性都扩展了 Observable 接口，这意味着它们都提供了注册侦听器的功能，当属性失效时，这些侦听器就会被触发。如果你不熟悉“invalidates”，它是一种将属性标记为潜在更改而不强制其重新计算属性值的方法。</p><p>对于具有复杂或昂贵计算的属性，这可能是一个有用的工具，但我发现它们使用得不如更改侦听器多。</p><p><strong>更改监听器</strong>：在此之上，JavaFX 属性扩展了 <code>ObservableValue&lt;T></code>，这意味着您可以注册监听器，该监听器只在对象实际更改时触发。与无效侦听器相比，我更经常使用这些侦听器。</p><p>更改侦听器允许我们听到更改，并提前提供可执行代码，这些代码将基于 Property 的新旧值执行。</p><h3 id=监听更改>监听更改</h3><p>您可以通过调用 <code>addListener()</code> 方法在属性上注册一个监听器，提供一个 <code>InvalidationListener</code>(不太常见)或 <code>ChangeListener</code>(更常见)。</p><p>要添加更改侦听器，我们可以通过实现 ChangeListener 接口来完整地定义它——这是一个具有一个方法：<code>changed()</code> 的函数接口。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>DoubleProperty</span> <span style=color:#000>altitude</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleDoubleProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>35000</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>ChangeListener</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Number</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>changeListener</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ChangeListener</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Number</span><span style=color:#ce5c00;font-weight:700>&gt;()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>changed</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableValue</span><span style=color:#ce5c00;font-weight:700>&lt;?</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>Number</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>observable</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>Number</span> <span style=color:#000>oldValue</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>Number</span> <span style=color:#000>newValue</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>newValue</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>doubleValue</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>15000</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>deployParachute</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>};</span>
</span></span><span style=display:flex><span><span style=color:#000>altitude</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>addListener</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>changeListener</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>所有的数值属性(double、float、int 和 long)都需要使用 Number 类型参数化的更改侦听器。当然，因为它们是一个功能性接口，我们也可以使用自 Java 8 以来的 lambdas 内联创建它们。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>altitude</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>addListener</span><span style=color:#ce5c00;font-weight:700>((</span><span style=color:#000>observable</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>oldValue</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>newValue</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>newValue</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>doubleValue</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>15000</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>deployParachute</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span>        <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>});</span>
</span></span></code></pre></div><p>每当属性的值更改时，更改侦听器将触发一次。</p><h2 id=什么是-binding>什么是 Binding</h2><p>Binding 是一种将对象连接在一起的方法，强制执行一个对象至少依赖另一个对象的关系。属性本身可以本机绑定，也可以通过创建 Expression 和 Binding 对象来绑定。</p><p>Expression 和 Binding 都是可观察对象，它们也依赖于至少一个其他可观察对象的值(但可能更多)。这使您能够创建具有多个计算的表达式链：一种将字符串或数字转换组合在一起的超简单方法。</p><p>Expression 和 Binding 在本文的中级和高级部分中。现在，我们只将两个属性绑定在一起，而不需要任何额外的类。</p><h3 id=如何绑定属性>如何绑定属性</h3><p>在幕后，绑定是侦听更改的特定用例。所有 JavaFX 的绑定 api 都有样板代码，用来监听(至少)一个属性的更改，并使用任何更改来更新该绑定的值。</p><p>更改侦听器让我们提前提供可执行代码，而绑定让我们方便地将两个属性串在一起，而不必担心实现更新特定值的问题。</p><p>最简单和最常用的方法是附加到 Property 对象本身的方法：<code>bind()</code> 和 <code>bindBidirectional()</code>。它们代表了单向和双向绑定的最简单的选项。</p><h3 id=单向绑定>单向绑定</h3><p>当您在目标属性上调用 <code>bind()</code> 方法时，您将第二个属性作为参数传递给它——绑定源。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>StringProperty</span> <span style=color:#000>sourceProperty</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleStringProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;First Value&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>StringProperty</span> <span style=color:#000>targetProperty</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleStringProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Second Value&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>targetProperty</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>bind</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>sourceProperty</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>目标存储对新源属性的引用，并侦听更改。当源值更改时，当检测到更改时，它会自动更新目标(本身)。</p><div align=center> <img src=https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20220111000825.png style=display:block;width:80% alt=20220111000825 align=center> </div><p>在本例中，targetProperty 将跟踪 sourceProperty 的值。关于此方法的额外位的几点注意事项:</p><ul>
<li>
<p>如果属性当前已经被绑定，则当前绑定将被删除，新绑定将替换它。</p></li><li>
<p>如果提供了 null 参数，则该方法抛出一个 NullPointerExeption。</p></li><li>
<p>该方法立即复制它正在侦听的属性的值，因此目标属性的当前值将丢失。</p></li></ul><h3 id=双向绑定>双向绑定</h3><p>当然，可以将两个方向的属性连接在一起，将它们的值连接在一起，这样它们的值总是相同的。为此，我们调用<code>bindBidirectional()</code>，再次将源属性作为参数传递。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>StringProperty</span> <span style=color:#000>sourceProperty</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleStringProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;First Value&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>StringProperty</span> <span style=color:#000>targetProperty</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleStringProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Second Value&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>targetProperty</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>bindBidirectional</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>sourceProperty</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>如果属性的值不同，那么方法调用的顺序对于确定绑定的起始值很重要。</p><p>应用于 targetProperty 的方法在对 sourceProperty 进行交互绑定之前立即更新 targetProperty 的值。这意味着在双向绑定之后，两个属性都将把属性的值作为参数传递(源属性)。</p><div align=center> <img src=https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20220111001044.png style=display:block;width:80% alt=20220111001044 align=center> </div><p>除了被限制为碳复制方法的基本绑定之外，JavaFX 还支持更复杂的绑定：创建一个属性的多个或复杂操作来更新另一个属性。</p><p>如果将一个属性绑定到另一个属性不能涵盖您的用例，请不要担心——我将在下面几节中介绍更复杂的绑定。</p><h2 id=中间绑定技术>中间绑定技术</h2><p>有三种方法可以操作任何属性，并将操作后的值用于绑定：</p><ul>
<li>Fluent API – 类似 <code>myProperty.bind(otherProperty).multiply(2)</code> 的方法</li><li>Bindings API – 类似 <code>Bindings.add(myProperty, otherProperty)</code> 的方法</li><li>Low-Level API – 创建 <code>DoubleBinding</code> 这样的自定义 Binding 对象</li></ul><p>其中两个提供了 cookie-cutter 方法，用于在预定义的实现中绑定属性。我总是发现这些包含了属性绑定的大部分用例，因为它们给了您巨大的灵活性。</p><p>低级 API(创建 Binding 对象)可以有更高的性能，但可能会变得复杂得多。在此基础上，我将它分成单独的部分，我将在本文的末尾详细介绍。</p><h3 id=fluent-api>Fluent API</h3><p>Fluent API 依赖于“表达式”对象的创建，该对象类似于属性(它们是可观察值)，具有额外的方便方法来支持额外的操作。</p><p>属性也可以绑定到表达式，这意味着任何操作的输出都可以用于更新属性，如上所述。这种功能——被观察到并依赖于对象的值——创造了链接的可能性。</p><div align=center> <img src=https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20220111001321.png style=display:block;width:80% alt=20220111001321 align=center> </div><p><strong>在字符串的情况下</strong>，我们可以使用它来创建字符串链，它们连接在一起。一旦 sourceProperty 更新，targetProperty 将通过表达式自动更新。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>StringProperty</span> <span style=color:#000>sourceProperty</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleStringProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;It doesn&#39;t matter how slowly you go&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>StringExpression</span> <span style=color:#000>expression</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>sourceProperty</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>concat</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34; as long as you don&#39;t stop&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>StringProperty</span> <span style=color:#000>targetProperty</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleStringProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>targetProperty</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>bind</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>expression</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>System</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>out</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>println</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>targetProperty</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#ce5c00;font-weight:700>());</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//Output: It doesn&#39;t matter how slowly you go as long as you don&#39;t stop
</span></span></span></code></pre></div><p>您可以内联完成所有这些工作，使复杂的代码相对简洁。在本例中，我们将在调用 bind 方法的同时创建 StringExpression。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>targetProperty</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>bind</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>sourceProperty</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>concat</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34; as long as you don&#39;t stop&#34;</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#000>System</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>out</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>println</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>targetProperty</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#ce5c00;font-weight:700>());</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//Output: It doesn&#39;t matter how slowly you go as long as you don&#39;t stop
</span></span></span></code></pre></div><p>这可能有点令人困惑，但不要忘记 targetProperty 实际上是绑定到由 <code>concat()</code> 方法创建的 StringExpression 的。绑定到 sourceProperty 的是匿名表达式。</p><p>这带来了惊人的好处。API 很丰富，这种风格生成的可读代码涵盖了您需要的大多数操作。</p><p>我们也可以使用 Fluent API 来处理数字。</p><p><strong>在处理数字时</strong>，我们可以链式操作来创建简单、可读的代码，表示我们试图复制的公式。要把角度转换成弧度，你要乘以 π 再除以 180。代码具有很高的可读性。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>DoubleProperty</span> <span style=color:#000>degrees</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleDoubleProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>180</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>DoubleProperty</span> <span style=color:#000>radians</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleDoubleProperty</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>radians</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>bind</span><span style=color:#ce5c00;font-weight:700>(</span>
</span></span><span style=display:flex><span>  <span style=color:#000>degrees</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>multiply</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Math</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>PI</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>divide</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>180</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>但是，就性能而言，每个表达式都是链中的一个链接，在初始属性的每次更改时都需要更新。在这个例子中，我们将角度转换为弧度，我们创建了两个可观察值来更新弧度属性。</p><p>对于复杂的转换，或者在需要进行大量绑定的情况下，可以考虑使用 Bindings API(如果它提供了所需的灵活性)，或者低级 API。</p><h3 id=bindings-api>Bindings API</h3><p>JavaFX 中的 Bindings 类是一个实用程序类，包含 249 个用于属性绑定的方法。它允许你在各种类型的可观察对象之间创建绑定。根据绑定的不同，可以将属性与值结合使用，比如字符串和数字。</p><div align=center> <img src=https://infi-img.oss-cn-hangzhou.aliyuncs.com/img/20220111001625.png style=display:block;width:80% alt=20220111001625 align=center> </div><p>有 10 种通用的绑定策略，我将其分为两个主要领域，我将其称为“<strong>值操作</strong>”和“<strong>集合操作</strong>”。有些桶装不下，所以我们有了一个不雅的桶，叫做“<strong>other</strong>”。</p><h3 id=values>Values</h3><ul>
<li>Mathematics (+, – ÷, ×)</li><li>Selecting the maximum or minimum</li><li>Value comparison (=, !=, &lt;, >, &lt;=, >=)</li><li>String formatting</li></ul><h3 id=collections>Collections</h3><ul>
<li>Binding two collections (lists, maps, sets)</li><li>Binding values to objects at a certain position in a collection</li><li>Binding to collection size</li><li>Whether a collection is empty</li></ul><h3 id=other-bindings>Other bindings</h3><ul>
<li>Multiple-object bindings</li><li>Boolean operators (and, not or) – (and when!)</li><li>Selecting values</li></ul><p>由于方法的数量庞大，我将深入探讨如何使用我认为(1)经常使用的方法或(2)难以理解的方法。本质上，我会试着用有用的解释增加价值，同时尽量不让你看到 RSI 滚动。</p><h3 id=操作值>操作值</h3><p>Bindings API 支持四种简单的数学操作:加法、减法、乘法和除法。它提供了单独的方法来使用浮点型、双精度型、整型和长值，以及两个 ObservableNumberValue 对象(例如 DoubleProperty)之间的方法。</p><h4 id=mathematics>Mathematics</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>DoubleBinding</span>    <span style=color:#000>add</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>NumberBinding</span>    <span style=color:#000>add</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>float</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>NumberBinding</span>    <span style=color:#000>add</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>NumberBinding</span>    <span style=color:#000>add</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>long</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>DoubleBinding</span>    <span style=color:#000>add</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>NumberBinding</span>    <span style=color:#000>add</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>float</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>NumberBinding</span>    <span style=color:#000>add</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>NumberBinding</span>    <span style=color:#000>add</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>long</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>NumberBinding</span>    <span style=color:#000>add</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>对于每个数值选项都有相同的方法。为了方便，API 交换了第一个和第二个参数。对于加法和乘法来说，顺序无关紧要，但是对于减法来说，顺序决定了哪个参数要从另一个参数中减去。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>DoubleBinding</span>    <span style=color:#000>subtract</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>DoubleBinding</span>    <span style=color:#000>subtract</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>NumberBinding</span>    <span style=color:#000>subtract</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>在每种情况下，从第一个参数中减去第二个参数。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>DoubleBinding</span>    <span style=color:#000>multiply</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>DoubleBinding</span>    <span style=color:#000>multiply</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>NumberBinding</span>    <span style=color:#000>multiply</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>最后，有了划分，秩序又变得重要起来。绑定的值计算为第一个参数除以第二个参数。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>DoubleBinding</span>    <span style=color:#000>divide</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>DoubleBinding</span>    <span style=color:#000>divide</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>NumberBinding</span>    <span style=color:#000>divide</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>总的来说，这为相对简单的操作生成了大量的方法——36 个实用方法用于 4 个基本操作。</p><p>这可能看起来有点过火，但它确实做到了它应该做的。JavaFX 的创建者为每个基本的数学运算提供了实现，这样您就不必做这些跑腿工作了。</p><h4 id=选择最大或最小>选择最大或最小</h4><p>和往常一样，JavaFX 在定义方便的方法方面做了大量的跑腿工作。下面是 <code>max()</code> 方法，它们在可观察值和非可观察值之间进行交换和更改。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>max</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>max</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>max</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>事实上，当你需要求两个数的最小值时，这是完全一样的。绑定总是等于两个的最小值——至少其中一个是可观察的。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>min</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>min</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>min</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><h4 id=比较值----->比较值(=, !=, &lt;, >, &lt;=, >=)</h4><p>当列表已满，选择了足够多的道具，或者当他们在游戏中获胜或失败时，价值比较可以自动提醒用户。</p><h4 id=取负和取反>取负和取反</h4><p>在最简单的情况下，JavaFX 提供了计算负数(减去 1 乘以数字)和的方法：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>negate</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>value</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>not</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableBooleanValue</span> <span style=color:#000>op</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><h4 id=不等于>不等于</h4><p>在复杂性方面，JavaFX 还提供了两种不同类型对象之间的比较。绑定的值将始终报告这两个对象是否相等。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>notEqual</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>epsilon</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>notEqual</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Object</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableObjectValue</span><span style=color:#ce5c00;font-weight:700>&lt;?&gt;</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>notEqual</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>epsilon</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>notEqual</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>notEqual</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableNumberValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>epsilon</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>notEqual</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableObjectValue</span><span style=color:#ce5c00;font-weight:700>&lt;?&gt;</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>Object</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>notEqual</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableObjectValue</span><span style=color:#ce5c00;font-weight:700>&lt;?&gt;</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableObjectValue</span><span style=color:#ce5c00;font-weight:700>&lt;?&gt;</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>它还为比较字符串提供了很多支持。特别值得注意的是 <code>notEqualIgnoreCase()</code> 方法。在比较之前，我花了很长时间将所有的字符串转换成小写。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>notEqual</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableStringValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableStringValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>notEqual</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableStringValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>String</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>notEqual</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>String</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableStringValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>notEqualIgnoreCase</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableStringValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableStringValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>notEqualIgnoreCase</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableStringValue</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>String</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>notEqualIgnoreCase</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>String</span> <span style=color:#000>op1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableStringValue</span> <span style=color:#000>op2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>正如标题所建议的，我们的值比较 bucket 还包含比较小于和大于的数值的方法。查看<a href=https://docs.oracle.com/javase/8/javafx/api/javafx/beans/binding/Bindings.html>文档</a>了解所有的细节——我暂时让您休息一下，然后继续讨论集合。</p><h3 id=操作集合>操作集合</h3><p>Bindings API 提供了四种不同的绑定到集合的方式:复制、索引绑定、大小绑定和空绑定。只有第一个集合将集合的内容复制到目标集合中。其他三个提取值—单个变量—基于集合状态的一个方面。</p><h4 id=绑定两个集合>绑定两个集合</h4><p>要将两个集合绑定在一起，您可以调用 <code>Bindings.bindContent()</code>或 <code>Bindings.bindContentBidirectional()</code>。</p><p>在第一种情况下，你将跟踪一个可观察集合——一个 ObservableList, ObservableSet 或 ObservableMap——并在同一类型的非可观察集合中创建一个 carbon-copy。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>bindContent</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>List</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>E</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>list1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableList</span><span style=color:#ce5c00;font-weight:700>&lt;?</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>E</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>list2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>bindContent</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>K</span><span style=color:#ce5c00;font-weight:700>,</span><span style=color:#000>V</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>map1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableMap</span><span style=color:#ce5c00;font-weight:700>&lt;?</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>K</span><span style=color:#ce5c00;font-weight:700>,?</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>V</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>map2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>bindContent</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Set</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>E</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>set1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableSet</span><span style=color:#ce5c00;font-weight:700>&lt;?</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>E</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>set2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>在这种情况下，非可观察对象集合的内容会立即被可观察对象的内容覆盖。</p><p>如果你想把两个可观察集合绑定在一起，使用 <code>Bindings.bindContentBidirectional()</code> 方法，它接受两个相同类型的集合作为参数。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>bindContentBidirectional</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableList</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>E</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>list1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableList</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>E</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>list2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>bindContentBidirectional</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableMap</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>K</span><span style=color:#ce5c00;font-weight:700>,</span><span style=color:#000>V</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>map1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableMap</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>K</span><span style=color:#ce5c00;font-weight:700>,</span><span style=color:#000>V</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>map2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>bindContentBidirectional</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>ObservableSet</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>E</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>set1</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>ObservableSet</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>E</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>set2</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p><strong>在这些情况下，第一个集合将被擦除，并作为绑定过程的一部分使用第二个列表的内容。</strong></p><p>Bindings API 不支持任何更复杂的集合绑定——比如相互映射、范围受限的列表复制。如果需要这些，则需要创建自己的绑定。为此，请查看下面的低级API部分。</p><h4 id=绑定集合相关的值>绑定集合——相关的值</h4><p>除此之外，绑定的选项仅限于绑定与集合相关的值——特定索引处的值、集合的大小或集合是否为空。</p><h5 id=将值绑定到集合中特定位置的对象>将值绑定到集合中特定位置的对象</h5><p>根据集合中指定索引处的单个值绑定变量是非常容易的。在每种情况下，你都需要提供一个可观察对象集合，以及该对象的索引。</p><p>索引的值也可以作为可观察值传入，这意味着随着它的变化，绑定的值也会发生变化。</p><p>每种对象类型都有一个方法专门化，它为请求的值生成正确类型的绑定对象。布尔值、浮点值、双精度值、整型值、长值和字符串值都通过单独的方法支持。</p><p><strong>记住</strong>：绝对值得记住的是，这些方法不会像我们上面看到的那样把你的参数绑定在一起。每个 valueAt 方法都返回一个 Binding 对象，其中包含您的值。</p><h5 id=绑定到大小或空置的>绑定到大小或空置的</h5><p>基于大小或集合是否为空的绑定要容易得多。绑定 API 提供了对 ObservableList, ObservableArray, ObservableSet 和 ObservableMap对象的支持，以及 ObservableStringValue。</p><p>查看 <code>isEmpty()</code> 和各种 <code>size()</code> 方法的文档，查看所有选项。</p><h3 id=创建绑定对象>创建绑定对象</h3><p>我将在这里介绍的 Bindings API 的最后一部分是绑定多个自定义对象，并提供一个函数来计算该值。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>createBooleanBinding</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Callable</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Boolean</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>func</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>Observable</span><span style=color:#ce5c00;font-weight:700>...</span> <span style=color:#000>dependencies</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>createDoubleBinding</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Callable</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Double</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>func</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>Observable</span><span style=color:#ce5c00;font-weight:700>...</span> <span style=color:#000>dependencies</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>createFloatBinding</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Callable</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Float</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>func</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>Observable</span><span style=color:#ce5c00;font-weight:700>...</span> <span style=color:#000>dependencies</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>createIntegerBinding</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Callable</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Integer</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>func</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>Observable</span><span style=color:#ce5c00;font-weight:700>...</span> <span style=color:#000>dependencies</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>createLongBinding</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Callable</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Long</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>func</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>Observable</span><span style=color:#ce5c00;font-weight:700>...</span> <span style=color:#000>dependencies</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>createObjectBinding</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Callable</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>func</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>Observable</span><span style=color:#ce5c00;font-weight:700>...</span> <span style=color:#000>dependencies</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>createStringBinding</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Callable</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>String</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>func</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>Observable</span><span style=color:#ce5c00;font-weight:700>...</span> <span style=color:#000>dependencies</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>这几乎和低级 API 一样好，但它有一些限制：</p><blockquote>
<p>请注意，它依赖于虚方法调用(您正在传递一个函数对象，而不是创建一个类方法)。这意味着如果你经常使用它，它可能会比低层 API 慢。</p></blockquote><p>不过，这是一个相对简单的API——只需传入每个依赖项，然后使用提供的函数对它们进行转换。为了清晰起见，我将函数定义为 lambda，但您也可以手动创建 <code>Callable&lt;Double></code> 并覆盖 <code>call()</code> 方法。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>IntegerProperty</span> <span style=color:#000>cost</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleIntegerProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>15</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>DoubleProperty</span> <span style=color:#000>multiplier</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleDoubleProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>25</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>flatRate</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>4</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>DoubleBinding</span> <span style=color:#000>totalCost</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Bindings</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>createDoubleBinding</span><span style=color:#ce5c00;font-weight:700>(</span>
</span></span><span style=display:flex><span>        <span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>cost</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>multiplier</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>flatRate</span><span style=color:#ce5c00;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000>cost</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>multiplier</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>如果这不能满足您的需求，您可以通过扩展 JavaFX 的 Bindings 类中可用的对象来创建完全定制的绑定。这样可以更快。所以如果你需要，这里是如何做的。</p><h2 id=高阶绑定低级-api-binding>高阶绑定——低级 API Binding</h2><p>在 JavaFX 中创建绑定的最可定制的方法是自己手动创建一个 binding 对象。这样做的好处是，您可以精确地定义所需的计算，而不必创建 Expression 对象链，这可能会降低性能。</p><p>当然，您也可以进行复杂的计算并使用 Bindings API 绑定多个对象，但正如我们前面看到的那样，这样做的效率并不高。低级 API 的好处是，在计算值时需要执行的任何计算都是在自定义 Binding 类中定义的。</p><p>如果你想知道为什么这可能会有更好的性能，那就是类函数更有可能被编译器“内联”。这意味着，如果您需要一个绑定的值重复且快速地为计算机，那么您的代码可能会执行得更快。</p><h3 id=什么是低级-api>什么是低级 API</h3><p>低级 API, 10 个抽象绑定类的集合，旨在实现所有棘手的绑定(例如，添加和删除侦听器)。这使您可以集中精力指定应该如何计算绑定的值。</p><p>每个类都接受可观察值(比如属性)并将它们转换为输出。就像 Fluent 和 Bindings API 一样，低级 API 支持布尔值、字符串、数字、集合和对象。</p><h3 id=创建低级-binding>创建低级 Binding</h3><p>创建低级绑定可以像定义抽象内部类(与其他代码一起定义的类)一样简单。因为抽象绑定类只有一个抽象方法，所以您只需要在定义方法时重写 <code>computeValue()</code>。</p><p>在定义绑定时，官方建议在绑定创建期间使用初始化块绑定源属性。老实说，与创建构造函数相比，我不喜欢这样做，但这可能只是因为初始化块看起来有点陌生。</p><p>总体效果是完全相同的——编译器将代码从初始化块复制到每个构造函数中。如果您要创建一个将要使用多次的具体类，则构造函数方法更合适。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>		<span style=color:#8f5902;font-style:italic>//Inside your binding object at the top
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>super</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>bind</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>cost</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>itemCount</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><p>然后，剩下的工作就是定义 <code>computeValue()</code> 方法。在本例中，它非常简单，但是您可以将计算变得任意复杂。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>DoubleProperty</span> <span style=color:#000>cost</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleDoubleProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>25</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>IntegerProperty</span> <span style=color:#000>itemCount</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SimpleIntegerProperty</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>15</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>DoubleBinding</span> <span style=color:#000>totalCost</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>DoubleBinding</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>super</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>bind</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>cost</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>itemCount</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>protected</span> <span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>computeValue</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>itemCount</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>cost</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>};</span>
</span></span></code></pre></div><p>由此可见，totalCost 绑定的值将始终反映 cost 和 itemCount 属性的乘积。</p><p>如果您希望能够传递 totalCost 对象并在稍后检索依赖项，您可以添加额外的功能来覆盖默认的 <code>getDependencies()</code> 方法。</p><h3 id=给低级-api-添加功能>给低级 API 添加功能</h3><p>在可定制的 value 方法之上，可以通过覆盖 <code>getDependencies()</code> 和 <code>dispose()</code> 方法来扩展低级 API 中的每个类。</p><ul>
<li><strong>getDependencies()</strong>：如果您需要存储它们并在以后取回它们，可以返回所有的依赖项(见下面的警告!)</li><li><strong>dispose()</strong>：可以注销绑定所有依赖项的侦听器。您通常不需要这样做，除非您特别在没有弱监听器(默认)的情况下实现绑定。</li></ul><h4 id=重写-getdependencies>重写 <code>getDependencies()</code></h4><p>如果您希望能够将绑定对象传递给另一个类，或者存储它并在以后检索依赖项，那么重写 <code>getDependencies()</code> 是很有用的。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>DoubleBinding</span> <span style=color:#000>totalCost</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>DoubleBinding</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>super</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>bind</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>cost</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>itemCount</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>protected</span> <span style=color:#204a87;font-weight:700>double</span> <span style=color:#000>computeValue</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>itemCount</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>cost</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>get</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>ObservableList</span><span style=color:#ce5c00;font-weight:700>&lt;?&gt;</span> <span style=color:#000>getDependencies</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>FXCollections</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>observableList</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Arrays</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>asList</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>cost</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>itemCount</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>};</span>
</span></span></code></pre></div><p>在匆忙重写此方法之前，值得记住的是，低级API的所有默认实现都使用弱侦听器。这意味着:</p><p><strong>如果你使用默认实现的低级 API，你需要保持对你的可观察对象的强引用，否则它们将被垃圾收集，引用将丢失。</strong></p><p>也就是说，如果您已经用强侦听器实现了绑定，那么您还需要重写 <code>dispose()</code> 方法。这将防止内存泄漏的发生，如果绑定被使用并被遗忘(至少被您……)后没有从被观察的对象中注销。</p><h3 id=重写-dispose>重写 <code>dispose()</code></h3><p>重写 <code>dispose()</code>方法就像系统地注销我们开始时绑定的每个可观察对象一样简单。要在一次调用中完成此操作，可以调用 <code>unbind()</code>，传入每个值。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@Override</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>dispose</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>unbind</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>cost</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>itemCount</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><p>如果您有一个更复杂的自定义实现，您可能需要一次查找和取消注册一个可观察对象。</p><h2 id=总结>总结</h2><p>JavaFX 中的属性可以是只读的，也可以是可写的，但是始终是可观察的。每个属性都实现了 javafx.bean 的功能。绑定，javafx.beans.value 和 javafx.beans.property 包。</p><p>每个属性都可以使用 InvalidationListener 或 ChangeListener 对象来观察。这两个都可以通过调用 <code>addListener()</code> 方法来访问，因为每个属性都有一个 <code>addListener()</code> 方法来进行无效和更改。</p><p>属性监听的一个扩展是属性绑定，该功能允许用户将属性连接在一起，以便根据一个或多个更改自动更新属性。</p><p>在此基础上，JavaFX 支持通过 Expression 对象和 bindings 对象扩展绑定。通过 Fluent 和 Bindings api 访问这些内容是最简单的。但是，如果您绝对需要性能或定制，那么低级 API 允许您自己创建完全定制的绑定。</p><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none>
<h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
Glad to hear it! Please <a href=https://github.com/infilos/infilos.com/issues/new>tell us how we can improve</a>.
</p><p class="feedback--response feedback--response-no">
Sorry to hear that. Please <a href=https://github.com/infilos/infilos.com/issues/new>tell us how we can improve</a>.
</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=t=>{if(typeof ga!="function")return;const e={command:"send",hitType:"event",category:"Helpful",action:"click",label:window.location.pathname,value:t};ga(e.command,e.hitType,e.category,e.action,e.label,e.value)};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(1)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script>
<br>
</div></main></div></div><footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Weibo aria-label=Weibo>
<a class=text-white target=_blank rel="noopener noreferrer" href=https://weibo.com/u/3848950217>
<i class="fab fa-weibo"></i>
</a>
</li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter>
<a class=text-white target=_blank rel="noopener noreferrer" href=https://twitter.com/zhange_zzg>
<i class="fab fa-twitter"></i>
</a>
</li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow">
<a class=text-white target=_blank rel="noopener noreferrer" href=https://stackoverflow.com>
<i class="fab fa-stack-overflow"></i>
</a>
</li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/infilos/infilos.com>
<i class="fab fa-github"></i>
</a>
</li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2022 infilos.com All Rights Reserved</small>
</div></div></div></footer></div><script src=/js/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script>
<script src=/js/main.min.3f3f4f1e22307ccbb13271a98be2e4dbb8386b7e67c3d606db44d3d0649f485e.js integrity="sha256-Pz9PHiIwfMuxMnGpi+Lk27g4a35nw9YG20TT0GSfSF4=" crossorigin=anonymous></script>
</body></html>