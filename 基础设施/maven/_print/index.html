<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.104.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel=canonical type=text/html href=/%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD/maven/><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Maven | infilos.com</title><meta property="og:title" content="Maven"><meta property="og:description" content="Infilos Wiki Website"><meta property="og:type" content="website"><meta property="og:url" content="/%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD/maven/"><meta property="og:site_name" content="infilos.com"><meta itemprop=name content="Maven"><meta itemprop=description content="Infilos Wiki Website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Maven"><meta name=twitter:description content="Infilos Wiki Website"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-123062585-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<link rel=preload href=/scss/main.min.5f60a6da3ce936fccd1096f5a4541bd9d925f00a0dd08f1363f26c26bfbfda5b.css as=style><link href=/scss/main.min.5f60a6da3ce936fccd1096f5a4541bd9d925f00a0dd08f1363f26c26bfbfda5b.css rel=stylesheet integrity><script src=/js/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand-lg navbar-dark td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512"><path style="fill:#ffc107" d="M432.384 143.616c-4.165-4.164-10.917-4.164-15.083.0l-60.352 60.352c-4.164 4.165-4.164 10.917.0 15.083 21.187 20.463 54.951 19.876 75.413-1.311 19.962-20.668 19.962-53.435.0-74.102L432.384 143.616z"/><path style="fill:#607d8b" d="M42.667 277.334c-5.891.003-10.669-4.771-10.672-10.662-.002-4.338 2.623-8.245 6.64-9.882l234.667-96c5.455-2.233 11.687.38 13.92 5.835s-.38 11.687-5.835 13.92l-234.667 96C45.433 277.069 44.056 277.337 42.667 277.334z"/><path style="fill:#546e7a" d="M391.552 56.448l-32-32C343.938 8.745 322.689-.059 300.544.0h-3.755c-46.082.024-83.432 37.374-83.456 83.456v3.755c-.053 22.138 8.75 43.377 24.448 58.987l32 32c4.165 4.164 10.917 4.164 15.083.0L391.531 71.531C395.701 67.372 395.71 60.62 391.552 56.448z"/><path style="fill:#607d8b" d="M160 469.334c-3.279.006-6.379-1.497-8.405-4.075L34.261 315.926c-3.635-4.636-2.823-11.341 1.813-14.976s11.341-2.823 14.976 1.813l117.333 149.333c3.629 4.641 2.809 11.344-1.832 14.973C164.681 468.533 162.375 469.329 160 469.334z"/><path style="fill:#455a64" d="M487.467 86.848l-3.669-3.648c-37.687-36.557-97.71-36.197-134.955.811l-51.413 51.413c-36.996 37.25-37.357 97.263-.811 134.955l3.584 3.669c1.7 2.457 4.671 3.706 7.616 3.2 2.831.005 5.548-1.115 7.552-3.115l172.181-172.181c4.189-4.143 4.226-10.896.083-15.085-.028-.028-.055-.056-.083-.083L487.467 86.848z"/><g><path style="fill:#ffc107" d="M501.333 192H480c-5.891.0-10.667-4.776-10.667-10.667s4.776-10.667 10.667-10.667h21.333c5.891.0 10.667 4.776 10.667 10.667S507.225 192 501.333 192z"/><path style="fill:#ffc107" d="M394.667 298.667c-5.891.0-10.667-4.776-10.667-10.667v-21.333c0-5.891 4.776-10.667 10.667-10.667 5.891.0 10.667 4.776 10.667 10.667V288C405.333 293.891 400.558 298.667 394.667 298.667z"/><path style="fill:#ffc107" d="M480 277.334c-2.831.005-5.548-1.115-7.552-3.115l-21.333-21.333c-4.093-4.237-3.975-10.99.262-15.083 4.134-3.993 10.687-3.993 14.821.0l21.333 21.333c4.159 4.172 4.148 10.926-.024 15.085C485.514 276.209 482.815 277.327 480 277.334z"/></g><g><path style="fill:#455a64" d="M266.667 448H96c-29.455.0-53.333 23.878-53.333 53.333.0 5.891 4.776 10.667 10.667 10.667h256c5.891.0 10.667-4.776 10.667-10.667C320 471.878 296.122 448 266.667 448z"/><circle style="fill:#455a64" cx="32" cy="288" r="32"/></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg></span><span class=font-weight-bold>infilos.com</span></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item style=max-width:90px;min-width:10px><a class=nav-link href=/%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86><span>基础</span></a></li><li class=nav-item style=max-width:90px;min-width:10px><a class=nav-link href=/%e7%bc%96%e7%a8%8b%e8%af%ad%e8%a8%80><span>语言</span></a></li><li class=nav-item style=max-width:90px;min-width:10px><a class=nav-link href=/%e6%a1%86%e6%9e%b6%e4%b8%8e%e5%ba%93><span>框架库</span></a></li><li class="nav-item dropdown" style=max-width:90px;min-width:10px><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>分布式
<span>+</span></a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/%e5%88%86%e5%b8%83%e5%bc%8f/base>基本构成</a></div></li><li class="nav-item dropdown" style=max-width:90px;min-width:10px><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>大数据
<span>+</span></a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/%e5%ad%98%e5%82%a8%e7%b3%bb%e7%bb%9f>存储系统</a>
<a class=dropdown-item href=/%e6%9f%a5%e8%af%a2%e7%b3%bb%e7%bb%9f>查询系统</a>
<a class=dropdown-item href=/%e6%b6%88%e6%81%af%e7%b3%bb%e7%bb%9f>消息系统</a>
<a class=dropdown-item href=/%e5%a4%84%e7%90%86%e7%b3%bb%e7%bb%9f>处理系统</a>
<a class=dropdown-item href=/%e6%95%b0%e6%8d%ae%e6%b2%bb%e7%90%86>数据治理</a></div></li><li class="nav-item dropdown" style=max-width:90px;min-width:10px><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中后台
<span>+</span></a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd>基础设施</a>
<a class=dropdown-item href=/%e7%94%a8%e6%88%b7%e7%b3%bb%e7%bb%9f>用户系统</a>
<a class=dropdown-item href=/%e4%ba%a4%e4%ba%92%e7%95%8c%e9%9d%a2>交互界面</a>
<a class=dropdown-item href=/%e4%b8%9a%e5%8a%a1%e7%b3%bb%e7%bb%9f>业务系统</a></div></li><li class=nav-item style=max-width:90px;min-width:10px><a class=nav-link href=/%e6%a8%a1%e5%bc%8f%e6%9e%b6%e6%9e%84><span>模式架构</span></a></li><li class=nav-item style=max-width:90px;min-width:10px><a class=nav-link href=/%e9%9d%a2%e8%af%95%e9%97%ae%e7%ad%94><span>面试</span></a></li><li class=nav-item style=max-width:90px;min-width:10px><a class=nav-link href=/%e7%ae%a1%e7%90%86%e8%b7%af%e5%be%84><span>管理</span></a></li><li class=nav-item style=max-width:90px;min-width:10px><a class=nav-link href=/%e5%bc%80%e6%ba%90%e9%a1%b9%e7%9b%ae><span>开源⭐</span></a></li></ul><div class="form-inline my-2 my-lg-0"><div class="nav-item nav-search-item my-2 my-md-0"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD/maven/>Return to the regular view of this page</a>.</p></div><h1 class=title>Maven</h1><ul><li>1: <a href=#pg-60983e6ffa073b1ac901861ff6473525>Maven Release</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-60983e6ffa073b1ac901861ff6473525>1 - Maven Release</h1><h2 id=1-设置-ossrh>1. 设置 OSSRH</h2><h3 id=11-创建账户>1.1 创建账户</h3><p><a href=https://issues.sonatype.org/secure/Signup!default.jspa>Sign up for an account here</a></p><h3 id=12-证明域名所有权>1.2 证明域名所有权</h3><p>Now that you have an account the next step in the process is to prove ownership of the domain that matches the group that you’d like to publish to. Usually this is your domain name in reverse, so something like <code>com.company</code> if your domain is <code>company.com</code>. Since our developer community is at <code>solace.community</code> this meant we would publish to the <code>community.solace</code> group.</p><p>To prove that we own this domain I had to execute a few simple steps:</p><ol><li>Open a <a href="https://issues.sonatype.org/secure/CreateIssue.jspa?issuetype=21&pid=10134">New Project Ticket</a> with OSSRH.</li><li>Follow the instructions request in the ticket to addd a DNS TXT record to our domain.</li><li>Wait a few hours (it says it could take up to 2 business days) for the DNS TXT record to be verified.</li><li>Check the ticket for confirmation that domain ownership has been confirmed.</li><li>Make a note to comment on this ticket after your first release to enable syncing to maven central!</li></ol><h3 id=13-创建-token>1.3 创建 Token</h3><p>Now that we have permission to publish to our domain we need to create a user token for publishing. This token will be used as part of the publishing process.</p><p>To get this token do the following:</p><ol><li>Login to the <a href=https://s01.oss.sonatype.org/#welcome>OSSRH Nexus Repository Manager</a> w/ your OSSRH account</li><li>Go to your profile using the menu under your username at the top right.</li><li>You should see a list menu that is on the <code>Summary</code> page; change it to <code>User Token</code>. You can create your token on this page.</li><li>Copy & Paste this token info so you can use it later! <strong>(Keep it private!)</strong></li></ol><h2 id=2-设置-maven>2. 设置 Maven</h2><ol><li>Ensured that my <code>groupId</code> starts with the reverse domain that we have approval to publish to! For example this is what we used, note that the <code>groupId</code> starts with <code>community.solace</code>.</li><li>When publishing maven projects you have releases and you have snapshots. A “release” is the final build for a version which does not change whereas a “snapshot” is a temporary build which can be replaced by another build with the same name.</li><li>Include a description name, description and url pointing to your repository. For example,</li><li>Include a license, source control info <code>scm</code>, developers and organization(I believe this is optional) information.</li><li>Add a profile for OSSRH which includes the <code>snapshotRepository</code> info, the <code>nexus-staging-maven-plugin</code>, and the <code>maven-gpg-plugin</code>. Note in the example below I have this profile <code>activeByDefault</code> so you don’t have to specify it when running maven commands, however you may not want to do this.</li><li>Include the <code>maven-release-plugin</code>, the <code>maven-javadoc-plugin</code>, the <code>maven-source-plugin</code> and the <code>flatten-maven-plugin</code> plugin.</li></ol><h2 id=3-设置-gpg-签名>3. 设置 GPG 签名</h2><h3 id=31-创建私有-key>3.1 创建私有 Key</h3><ol><li><p>Install the gpg tool; on mac you can do this by executing the command below. If you aren’t using a mac check out the instructions <a href=https://www.marcd.dev/articles/2021-03/mvncentral-publish-github>here</a></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>brew install gpg
</span></span></code></pre></div></li><li><p>Generate your key pair. You will be prompted for a “Real Name” and “Eamil Address” that you want to use with the key</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>gpg --gen-key
</span></span></code></pre></div></li></ol><h3 id=32-共享公共-key>3.2 共享公共 Key</h3><ol><li><p>Get your keypair identifier. To do this you need to list your keys. The key will have an identifier that looks like a random string of characters, something like <em>C48B6G0D63B854H7943892DF0C753FEC18D3F855</em>. In the command below I’ve replaced it with <code>MYIDENTIFIER</code> to show it’s location.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>MJD-MacBook-Pro.local:~$ gpg --list-keys
</span></span><span style=display:flex><span>/path/to/keyring/pubring.kbx
</span></span><span style=display:flex><span>----------------------------------------
</span></span><span style=display:flex><span>pub   rsa3072 2021-03-11 [SC] [expires: 2023-03-11]
</span></span><span style=display:flex><span>   MYIDENTIFIER
</span></span><span style=display:flex><span>uid           [ultimate] solacecommunity &lt;community-github@solace.com&gt;
</span></span><span style=display:flex><span>sub   rsa3072 2021-03-11 [E] [expires: 2023-03-11]
</span></span></code></pre></div></li><li><p>Distribute to a key server using the identifier found in the previous step. Note that you may want to publish to a different keyserver. The one that worked for me was hkp://keyserver.ubuntu.com:11371</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>gpg --keyserver hkp://pool.sks-keyservers.net --send-keys MYIDENTIFIER
</span></span></code></pre></div></li></ol><h2 id=4-设置-github-密匙>4. 设置 Github 密匙</h2><p>基于前面的操作，在 Github 中设置以下密匙，可以以仓库或组织来设置：</p><ul><li><p>OSSRH_USERNAME：OSSRH 的登录账户名</p></li><li><p>OSSRH_PASSWORD：OSSRH 中获得的 Token</p></li><li><p>OSSRH_GPG_SECRET_KEY：GPG 的私有 Key，可以通过如下命令导出</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>gpg --export-secret-keys -a {KEY-ID} &gt; secret.txt
</span></span></code></pre></div></li><li><p>OSSRH_GPG_SECRET_KEY_PASSWORD：GPG 私有 Key 的密码，即创建 Key 时设置的密码</p></li></ul><h2 id=5-设置-github-action>5. 设置 Github Action</h2><p>参考仓库：<a href=https://github.com/infilos/maven-github-action-demo>infilos/maven-github-action-demo</a></p><p>在该仓库中，推送 main 分支会自动触发 Maven 发布，并创建对应的 Release 日志。</p><h2 id=参考连接>参考连接</h2><ul><li><a href=https://www.marcd.dev/articles/2021-03/mvncentral-publish-github>https://www.marcd.dev/articles/2021-03/mvncentral-publish-github</a></li><li><a href=https://gist.github.com/sualeh/ae78dc16123899d7942bc38baba5203c>https://gist.github.com/sualeh/ae78dc16123899d7942bc38baba5203c</a></li><li><a href=https://github.com/chhh/sonatype-ossrh-parent/blob/master/publishing-to-maven-central.md>https://github.com/chhh/sonatype-ossrh-parent/blob/master/publishing-to-maven-central.md</a></li></ul></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/infilos><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 infilos.com All Rights Reserved</small></div></div></div></footer></div><script src=/js/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script>
<script src=/js/main.min.7d5b92c4889cf0554b0ea5e2309b0b81b196aa7c9a235632938a25d9fc4d8a7c.js integrity="sha256-fVuSxIic8FVLDqXiMJsLgbGWqnyaI1Yyk4ol2fxNinw=" crossorigin=anonymous></script></body></html>